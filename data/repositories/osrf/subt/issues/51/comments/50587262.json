{"links": {"self": {"href": "data/repositories/osrf/subt/issues/51/comments/50587262.json"}, "html": {"href": "#!/osrf/subt/issues/51#comment-50587262"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/subt/issues/51.json"}}, "type": "issue", "id": 51, "repository": {"links": {"self": {"href": "data/repositories/osrf/subt.json"}, "html": {"href": "#!/osrf/subt"}, "avatar": {"href": "data/bytebucket.org/ravatar/{3c95f6ad-c304-407c-b838-09597d836552}ts=2272898"}}, "type": "repository", "name": "subt", "full_name": "osrf/subt", "uuid": "{3c95f6ad-c304-407c-b838-09597d836552}"}, "title": "Multiple Binds on same address, different ports in comms client fails"}, "content": {"raw": "if you change \n\n#!/osrf/subt/src/6a55ea46e86a874e55e472186131746415e67063/subt_gazebo/include/subt_gazebo/CommsClient.hh#lines-157,158\n\nto \n\n\n```\n#!c++\n      auto services = this->node.AdvertisedServices();\n      auto found = std::find(std::begin(services), std::end(services), \"/\" + address);\n      // if not found, advertise service\n      if (found == std::end(services))\n      {\n        if (!this->node.Advertise(address, &CommsClient::OnMessage, this, opts))\n          return false;\n      }\n\n\n```\n\nseems to fix it", "markup": "markdown", "html": "<p>if you change </p>\n<p><a href=\"#!/osrf/subt/src/6a55ea46e86a874e55e472186131746415e67063/subt_gazebo/include/subt_gazebo/CommsClient.hh#lines-157,158\" rel=\"nofollow\" class=\"ap-connect-link\">#!/osrf/subt/src/6a55ea46e86a874e55e472186131746415e67063/subt_gazebo/include/subt_gazebo/CommsClient.hh#lines-157,158</a></p>\n<p>to </p>\n<div class=\"codehilite language-c++\"><pre><span></span>      <span class=\"k\">auto</span> <span class=\"n\">services</span> <span class=\"o\">=</span> <span class=\"k\">this</span><span class=\"o\">-&gt;</span><span class=\"n\">node</span><span class=\"p\">.</span><span class=\"n\">AdvertisedServices</span><span class=\"p\">();</span>\n      <span class=\"k\">auto</span> <span class=\"n\">found</span> <span class=\"o\">=</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">find</span><span class=\"p\">(</span><span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">begin</span><span class=\"p\">(</span><span class=\"n\">services</span><span class=\"p\">),</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">end</span><span class=\"p\">(</span><span class=\"n\">services</span><span class=\"p\">),</span> <span class=\"s\">&quot;/&quot;</span> <span class=\"o\">+</span> <span class=\"n\">address</span><span class=\"p\">);</span>\n      <span class=\"c1\">// if not found, advertise service</span>\n      <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"n\">found</span> <span class=\"o\">==</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">end</span><span class=\"p\">(</span><span class=\"n\">services</span><span class=\"p\">))</span>\n      <span class=\"p\">{</span>\n        <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"o\">!</span><span class=\"k\">this</span><span class=\"o\">-&gt;</span><span class=\"n\">node</span><span class=\"p\">.</span><span class=\"n\">Advertise</span><span class=\"p\">(</span><span class=\"n\">address</span><span class=\"p\">,</span> <span class=\"o\">&amp;</span><span class=\"n\">CommsClient</span><span class=\"o\">::</span><span class=\"n\">OnMessage</span><span class=\"p\">,</span> <span class=\"k\">this</span><span class=\"p\">,</span> <span class=\"n\">opts</span><span class=\"p\">))</span>\n          <span class=\"k\">return</span> <span class=\"nb\">false</span><span class=\"p\">;</span>\n      <span class=\"p\">}</span>\n</pre></div>\n\n\n<p>seems to fix it</p>", "type": "rendered"}, "created_on": "2019-02-13T20:11:39.296890+00:00", "user": {"display_name": "Jack Kelly", "uuid": "{60f78584-9b71-4aaf-96d6-d70b03637127}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B60f78584-9b71-4aaf-96d6-d70b03637127%7D"}, "html": {"href": "https://bitbucket.org/%7B60f78584-9b71-4aaf-96d6-d70b03637127%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/577b35c16383c7546882829abdb09c62d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJK-1.png"}}, "nickname": "jack-kelly", "type": "user", "account_id": "5b889f0de0eb212c4736bab5"}, "updated_on": "2019-02-13T20:12:11.284277+00:00", "type": "issue_comment", "id": 50587262}