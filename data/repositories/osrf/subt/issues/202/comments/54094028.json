{"links": {"self": {"href": "data/repositories/osrf/subt/issues/202/comments/54094028.json"}, "html": {"href": "#!/osrf/subt/issues/202#comment-54094028"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/subt/issues/202.json"}}, "type": "issue", "id": 202, "repository": {"links": {"self": {"href": "data/repositories/osrf/subt.json"}, "html": {"href": "#!/osrf/subt"}, "avatar": {"href": "data/bytebucket.org/ravatar/{3c95f6ad-c304-407c-b838-09597d836552}ts=2272898"}}, "type": "repository", "name": "subt", "full_name": "osrf/subt", "uuid": "{3c95f6ad-c304-407c-b838-09597d836552}"}, "title": "Slow AWS initialization?"}, "content": {"raw": "Arthur, the docker image is based on subt\\_seed example:\n\n\u200c\n\n```\nFROM osrf/subt-virtual-testbed:subt_solution_latest\n\nRUN /usr/bin/python3 -m pip install --user --no-cache-dir msgpack pyserial \"opencv-python>3.4.2,<4\"\nRUN git clone https://github.com/robotika/osgar.git osgar \\\n  && cd osgar \\\n  && git checkout feature/virtual-ignition\n\nCOPY run_solution.bash ./\n\nCOPY subt_seed_node.cc ./src/subt_seed/src/subt_seed_node.cc\nRUN /bin/bash -c 'source /opt/ros/melodic/setup.bash && catkin_make install'\n\nENTRYPOINT [\"./run_solution.bash\"]\n```\n\nand `run_solution.bash` is currently\n\n\u200c\n\n```\n#!/usr/bin/env bash\n\n. /opt/ros/melodic/setup.bash\n. ~/subt_solution/install/setup.sh\n\n# Wait for the bridge\nsleep 30\n\n# Run your solution.\nroslaunch subt_seed x1.launch &\n\nsleep 10\n\ncd osgar\n\npython subt/wait_for_sensors.py\n\npython3 -m subt run subt/subt-x2.json --side left --walldist 0.75 --timeout 180 --note \"try to visit artifact and return home\" 2>&1 | python subt/std2ros.py\n\n```\n\nFor `ver5` I added `wait_for_sensors.py` and to get \u201cstdout\u201d I added also `std2ros.py`", "markup": "markdown", "html": "<p>Arthur, the docker image is based on subt_seed example:</p>\n<p>\u200c</p>\n<div class=\"codehilite\"><pre><span></span>FROM osrf/subt-virtual-testbed:subt_solution_latest\n\nRUN /usr/bin/python3 -m pip install --user --no-cache-dir msgpack pyserial &quot;opencv-python&gt;3.4.2,&lt;4&quot;\nRUN git clone https://github.com/robotika/osgar.git osgar \\\n  &amp;&amp; cd osgar \\\n  &amp;&amp; git checkout feature/virtual-ignition\n\nCOPY run_solution.bash ./\n\nCOPY subt_seed_node.cc ./src/subt_seed/src/subt_seed_node.cc\nRUN /bin/bash -c &#39;source /opt/ros/melodic/setup.bash &amp;&amp; catkin_make install&#39;\n\nENTRYPOINT [&quot;./run_solution.bash&quot;]\n</pre></div>\n\n\n<p>and <code>run_solution.bash</code> is currently</p>\n<p>\u200c</p>\n<div class=\"codehilite language-bash\"><pre><span></span><span class=\"ch\">#!/usr/bin/env bash</span>\n\n. /opt/ros/melodic/setup.bash\n. ~/subt_solution/install/setup.sh\n\n<span class=\"c1\"># Wait for the bridge</span>\nsleep <span class=\"m\">30</span>\n\n<span class=\"c1\"># Run your solution.</span>\nroslaunch subt_seed x1.launch <span class=\"p\">&amp;</span>\n\nsleep <span class=\"m\">10</span>\n\n<span class=\"nb\">cd</span> osgar\n\npython subt/wait_for_sensors.py\n\npython3 -m subt run subt/subt-x2.json --side left --walldist <span class=\"m\">0</span>.75 --timeout <span class=\"m\">180</span> --note <span class=\"s2\">&quot;try to visit artifact and return home&quot;</span> <span class=\"m\">2</span>&gt;<span class=\"p\">&amp;</span><span class=\"m\">1</span> <span class=\"p\">|</span> python subt/std2ros.py\n</pre></div>\n\n\n<p>For <code>ver5</code> I added <code>wait_for_sensors.py</code> and to get \u201cstdout\u201d I added also <code>std2ros.py</code></p>", "type": "rendered"}, "created_on": "2019-09-26T16:35:39.651359+00:00", "user": {"display_name": "Martin Dlouhy", "uuid": "{27de76db-249c-44be-9eb8-91a3b17bf0d7}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B27de76db-249c-44be-9eb8-91a3b17bf0d7%7D"}, "html": {"href": "https://bitbucket.org/%7B27de76db-249c-44be-9eb8-91a3b17bf0d7%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/85a9b1d43839b393296feb3b35a2e577d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsMD-1.png"}}, "nickname": "robotikacz", "type": "user", "account_id": "557058:490c665b-b69c-40f3-80ea-64f20747efc4"}, "updated_on": null, "type": "issue_comment", "id": 54094028}