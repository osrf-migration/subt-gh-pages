{"priority": "blocker", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/subt.json"}, "html": {"href": "#!/osrf/subt"}, "avatar": {"href": "data/bytebucket.org/ravatar/{3c95f6ad-c304-407c-b838-09597d836552}ts=2272898"}}, "type": "repository", "name": "subt", "full_name": "osrf/subt", "uuid": "{3c95f6ad-c304-407c-b838-09597d836552}"}, "links": {"attachments": {"href": "data/repositories/osrf/subt/issues/225/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/subt/issues/225.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/subt/issues/225/watch"}, "comments": {"href": "data/repositories/osrf/subt/issues/225/comments_page=1.json"}, "html": {"href": "#!/osrf/subt/issues/225/local-aws-docker-simulation-does-not"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/subt/issues/225/vote"}}, "reporter": {"display_name": "Martin Dlouhy", "uuid": "{27de76db-249c-44be-9eb8-91a3b17bf0d7}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B27de76db-249c-44be-9eb8-91a3b17bf0d7%7D"}, "html": {"href": "https://bitbucket.org/%7B27de76db-249c-44be-9eb8-91a3b17bf0d7%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/85a9b1d43839b393296feb3b35a2e577d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsMD-1.png"}}, "nickname": "robotikacz", "type": "user", "account_id": "557058:490c665b-b69c-40f3-80ea-64f20747efc4"}, "title": "Local/AWS docker simulation does not always start", "component": null, "votes": 0, "watches": 1, "content": {"raw": "I originally suspected wrong configuration selection \\(#217\\), but I am much more careful now and never the less robot sometimes does not react??\r\n\r\nI use 3 docker debug setup: sim, bridge and solution:\r\n\r\n`gpu@gpu-desktop:~/subt_testbed$ ./run.bash osrf/subt-virtual-testbed:cloudsim_sim_latest cloudsim_sim.ign worldName:=simple_tunnel_02 robotName1:=X2L robotConfig1:=X2_SENSOR_CONFIG_4`\r\n\r\n`gpu@gpu-desktop:~/subt_testbed$ ./run.bash osrf/subt-virtual-testbed:cloudsim_bridge_latest worldName:=simple_tunnel_02 robotName1:=X2L robotConfig1:=X2_SENSOR_CONFIG_4`\r\n\r\nand 3rd is our docker based on `subt_seed` example.\r\n\r\nOn the simulation terminal I see:\r\n\r\n`[Msg] Scoring has Started`\r\n\r\nbut nothing more although the robot should be already moving.\r\n\r\nBridge reports:\r\n\r\n\u200c\r\n\r\n```\r\nROS_MASTER_URI=http://localhost:11311\r\n\r\nNo processes to monitor\r\nshutting down processing monitor...\r\n... shutting down processing monitor complete\r\nprocess[X2L/ros1_ign_bridge_imu-1]: started with pid [119]\r\nprocess[tf_world_static-4]: started with pid [122]\r\n[Dbg] [Manager.cc:421] Death of process[52] with name[x2_description].\r\nprocess[X2L/ros1_ign_bridge_pose-2]: started with pid [153]\r\nprocess[X2L/ros1_ign_bridge_twist-3]: started with pid [171]\r\nprocess[X2L/ros1_ign_bridge_camera-4]: started with pid [184]\r\nprocess[X2L/ros1_ign_image_camera-5]: started with pid [197]\r\nprocess[X2L/ros1_ign_bridge_gpu_lidar-6]: started with pid [210]\r\nprocess[X2L/ros1_ign_bridge_odom-7]: started with pid [222]\r\nprocess[X2L/ros1_ign_bridge_battery_state-8]: started with pid [235]\r\nprocess[X2L/pose_tf_broadcaster-9]: started with pid [248]\r\n```\r\n\r\nand the solution reports receiving of data:\r\n\r\n\u200c\r\n\r\n```\r\n[ INFO] [1570181442.395531202, 957.000000000]: received Imu 3500\r\n[ INFO] [1570181442.395660705, 957.000000000]: received Odom 3500\r\n[ INFO] [1570181442.473386446, 957.048000000]: received Scan 1400\r\n[ INFO] [1570181442.473581647, 957.048000000]: received Image 1400\r\n[ INFO] [1570181445.649678831, 959.000000000]: received Imu 3600\r\n[ INFO] [1570181445.649816540, 959.000000000]: received Odom 3600\r\n0:02:00.069263 (0.0 0.0 0.0) [('acc', 1825), ('image', 730), ('origin', 730), ('pose2d', 1825), ('rot', 1825), ('scan', 365), ('sim_time_sec', 36)]\r\n0:02:00.069263 []\r\n[ INFO] [1570181447.128823277, 959.904000000]: Python3: stdout 0:02:00.069263 (0.0 0.0 0.0) [('acc', 1825), ('image', 730), ('origin', 730), ('pose2d', 1825), ('rot', 1825), ('scan', 365), ('sim_time_sec', 36)]\r\n```\r\n\r\nbut the robot is still at \\(0, 0, 0\\) even after 2 minutes of \u201csimulation\u201d??\r\n\r\nAny hint what I should check? This happened to me alreaday say 5 times? I am in particular \u201cscared\u201d of necessary `sleep 30` in example solution \u201cto wait for bridge\u201d \u2026 isn\u2019t there also some other \u201ctimeout\u201d when the solution has to respond after sim and bridge are started?\r\n\r\np.s. the robot is sending turn command since the beginning:\r\n\r\n\u200c\r\n\r\n```\r\n0:00:02.305059 20 b'cmd_vel 0.000000 -0.785398'\r\n0:00:02.354023 20 b'cmd_vel 0.000000 -0.785398'\r\n```\r\n\r\n\u200c\r\n\r\n```\r\n\u200c\r\n```\r\n\r\n```\r\n\u200c\r\n```\r\n\r\n\u200c", "markup": "markdown", "html": "<p>I originally suspected wrong configuration selection (<a href=\"#!/osrf/subt/issues/217/urban-feature-validation-of-robot\" rel=\"nofollow\" title=\"[Urban Feature] Validation of robot configuration name\" class=\"ap-connect-link\">#217</a>), but I am much more careful now and never the less robot sometimes does not react??</p>\n<p>I use 3 docker debug setup: sim, bridge and solution:</p>\n<p><code>gpu@gpu-desktop:~/subt_testbed$ ./run.bash osrf/subt-virtual-testbed:cloudsim_sim_latest cloudsim_sim.ign worldName:=simple_tunnel_02 robotName1:=X2L robotConfig1:=X2_SENSOR_CONFIG_4</code></p>\n<p><code>gpu@gpu-desktop:~/subt_testbed$ ./run.bash osrf/subt-virtual-testbed:cloudsim_bridge_latest worldName:=simple_tunnel_02 robotName1:=X2L robotConfig1:=X2_SENSOR_CONFIG_4</code></p>\n<p>and 3rd is our docker based on <code>subt_seed</code> example.</p>\n<p>On the simulation terminal I see:</p>\n<p><code>[Msg] Scoring has Started</code></p>\n<p>but nothing more although the robot should be already moving.</p>\n<p>Bridge reports:</p>\n<p>\u200c</p>\n<div class=\"codehilite\"><pre><span></span>ROS_MASTER_URI=http://localhost:11311\n\nNo processes to monitor\nshutting down processing monitor...\n... shutting down processing monitor complete\nprocess[X2L/ros1_ign_bridge_imu-1]: started with pid [119]\nprocess[tf_world_static-4]: started with pid [122]\n[Dbg] [Manager.cc:421] Death of process[52] with name[x2_description].\nprocess[X2L/ros1_ign_bridge_pose-2]: started with pid [153]\nprocess[X2L/ros1_ign_bridge_twist-3]: started with pid [171]\nprocess[X2L/ros1_ign_bridge_camera-4]: started with pid [184]\nprocess[X2L/ros1_ign_image_camera-5]: started with pid [197]\nprocess[X2L/ros1_ign_bridge_gpu_lidar-6]: started with pid [210]\nprocess[X2L/ros1_ign_bridge_odom-7]: started with pid [222]\nprocess[X2L/ros1_ign_bridge_battery_state-8]: started with pid [235]\nprocess[X2L/pose_tf_broadcaster-9]: started with pid [248]\n</pre></div>\n\n\n<p>and the solution reports receiving of data:</p>\n<p>\u200c</p>\n<div class=\"codehilite\"><pre><span></span>[ INFO] [1570181442.395531202, 957.000000000]: received Imu 3500\n[ INFO] [1570181442.395660705, 957.000000000]: received Odom 3500\n[ INFO] [1570181442.473386446, 957.048000000]: received Scan 1400\n[ INFO] [1570181442.473581647, 957.048000000]: received Image 1400\n[ INFO] [1570181445.649678831, 959.000000000]: received Imu 3600\n[ INFO] [1570181445.649816540, 959.000000000]: received Odom 3600\n0:02:00.069263 (0.0 0.0 0.0) [(&#39;acc&#39;, 1825), (&#39;image&#39;, 730), (&#39;origin&#39;, 730), (&#39;pose2d&#39;, 1825), (&#39;rot&#39;, 1825), (&#39;scan&#39;, 365), (&#39;sim_time_sec&#39;, 36)]\n0:02:00.069263 []\n[ INFO] [1570181447.128823277, 959.904000000]: Python3: stdout 0:02:00.069263 (0.0 0.0 0.0) [(&#39;acc&#39;, 1825), (&#39;image&#39;, 730), (&#39;origin&#39;, 730), (&#39;pose2d&#39;, 1825), (&#39;rot&#39;, 1825), (&#39;scan&#39;, 365), (&#39;sim_time_sec&#39;, 36)]\n</pre></div>\n\n\n<p>but the robot is still at (0, 0, 0) even after 2 minutes of \u201csimulation\u201d??</p>\n<p>Any hint what I should check? This happened to me alreaday say 5 times? I am in particular \u201cscared\u201d of necessary <code>sleep 30</code> in example solution \u201cto wait for bridge\u201d \u2026 isn\u2019t there also some other \u201ctimeout\u201d when the solution has to respond after sim and bridge are started?</p>\n<p>p.s. the robot is sending turn command since the beginning:</p>\n<p>\u200c</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"mi\">0</span><span class=\"o\">:</span><span class=\"mi\">00</span><span class=\"o\">:</span><span class=\"mf\">02.305059</span> <span class=\"mi\">20</span> <span class=\"n\">b</span><span class=\"s1\">&#39;cmd_vel 0.000000 -0.785398&#39;</span>\n<span class=\"mi\">0</span><span class=\"o\">:</span><span class=\"mi\">00</span><span class=\"o\">:</span><span class=\"mf\">02.354023</span> <span class=\"mi\">20</span> <span class=\"n\">b</span><span class=\"s1\">&#39;cmd_vel 0.000000 -0.785398&#39;</span>\n</pre></div>\n\n\n<p>\u200c</p>\n<div class=\"codehilite\"><pre><span></span>\u200c\n</pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span>\u200c\n</pre></div>\n\n\n<p>\u200c</p>", "type": "rendered"}, "assignee": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "state": "closed", "version": null, "edited_on": null, "created_on": "2019-10-04T09:46:24.394861+00:00", "milestone": null, "updated_on": "2020-02-21T21:43:29.863357+00:00", "type": "issue", "id": 225}