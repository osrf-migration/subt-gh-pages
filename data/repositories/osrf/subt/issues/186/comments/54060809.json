{"links": {"self": {"href": "data/repositories/osrf/subt/issues/186/comments/54060809.json"}, "html": {"href": "#!/osrf/subt/issues/186#comment-54060809"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/subt/issues/186.json"}}, "type": "issue", "id": 186, "repository": {"links": {"self": {"href": "data/repositories/osrf/subt.json"}, "html": {"href": "#!/osrf/subt"}, "avatar": {"href": "data/bytebucket.org/ravatar/{3c95f6ad-c304-407c-b838-09597d836552}ts=2272898"}}, "type": "repository", "name": "subt", "full_name": "osrf/subt", "uuid": "{3c95f6ad-c304-407c-b838-09597d836552}"}, "title": "Reporting artifacts"}, "content": {"raw": "Sorry for reopening this, but I think my question is relevant to this thread.  I\u2019m currently trying to use the ACK system to confirm artifact reports, but it seems like the ACK\u2019s take a long time \\(at least 20 seconds\\) to get back to the robot.  \\(I\u2019m testing artifact reports from the starting platform, with fake artifacts, before moving anywhere but after calling the \u201csubt/start\u201d service.\\)\n\nMy specific question is this: when we instantiate the subt::CommsClient used to send and listen for messages from the base station, should the \u2018\\_use\\_ignition\u2019 parameter be set to true or false? I understand that[ Issue 144](#!/osrf/subt/issues/144/subt-commsclient-is-useless-unless) and the code comments in subt\\_communication\\_client.h say that robots should always use \u201c\\_use\\_ignition=false', but when I look at the [BaseStationPlugin.cc](http://BaseStationPlugin.cc) it uses:\n\n\u200c\n\n```\nbool BaseStationPlugin::Load(const tinyxml2::XMLElement *)\n{\n  this->client.reset(new subt::CommsClient(\"base_station\", true, true));\n  this->client->Bind(&BaseStationPlugin::OnArtifact, this);\n```\n\nIn our comms manager, we setup the CommsClient with:\n\n\u200c\n\n```\nCommsManager::CommsManager(const std::string &_address) : address(_address)\n{\n    printf(\"Bind Address is [%s]\\n\",_address.c_str());\n    this->client = std::make_unique<subt::CommsClient>(_address, false,false);\n    this->client->Bind(&CommsManager::receive_receipt, this, _address, this->receipt_port);\n```\n\nCould the difference between \u2018\\_use\\_ignition\u2019 values cause the ACK sent back by the base station to be delayed in getting to the robot? Thanks!", "markup": "markdown", "html": "<p>Sorry for reopening this, but I think my question is relevant to this thread.  I\u2019m currently trying to use the ACK system to confirm artifact reports, but it seems like the ACK\u2019s take a long time (at least 20 seconds) to get back to the robot.  (I\u2019m testing artifact reports from the starting platform, with fake artifacts, before moving anywhere but after calling the \u201csubt/start\u201d service.)</p>\n<p>My specific question is this: when we instantiate the subt::CommsClient used to send and listen for messages from the base station, should the \u2018_use_ignition\u2019 parameter be set to true or false? I understand that<a data-is-external-link=\"true\" href=\"#!/osrf/subt/issues/144/subt-commsclient-is-useless-unless\" rel=\"nofollow\"> Issue 144</a> and the code comments in subt_communication_client.h say that robots should always use \u201c_use_ignition=false', but when I look at the <a data-is-external-link=\"true\" href=\"http://BaseStationPlugin.cc\" rel=\"nofollow\">BaseStationPlugin.cc</a> it uses:</p>\n<p>\u200c</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"nt\">bool</span> <span class=\"nt\">BaseStationPlugin</span><span class=\"p\">::</span><span class=\"nd\">Load</span><span class=\"o\">(</span><span class=\"nt\">const</span> <span class=\"nt\">tinyxml2</span><span class=\"p\">::</span><span class=\"nd\">XMLElement</span> <span class=\"o\">*)</span>\n<span class=\"p\">{</span>\n  <span class=\"err\">this-&gt;client.reset(new</span> <span class=\"n\">subt</span><span class=\"p\">:</span><span class=\"o\">:</span><span class=\"nf\">CommsClient</span><span class=\"p\">(</span><span class=\"s2\">&quot;base_station&quot;</span><span class=\"p\">,</span> <span class=\"n\">true</span><span class=\"p\">,</span> <span class=\"n\">true</span><span class=\"p\">));</span>\n  <span class=\"err\">this-&gt;client-&gt;Bind(&amp;</span><span class=\"n\">BaseStationPlugin</span><span class=\"p\">:</span><span class=\"o\">:</span><span class=\"n\">OnArtifact</span><span class=\"p\">,</span> <span class=\"n\">this</span><span class=\"p\">);</span>\n</pre></div>\n\n\n<p>In our comms manager, we setup the CommsClient with:</p>\n<p>\u200c</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"nt\">CommsManager</span><span class=\"p\">::</span><span class=\"nd\">CommsManager</span><span class=\"o\">(</span><span class=\"nt\">const</span> <span class=\"nt\">std</span><span class=\"p\">::</span><span class=\"nd\">string</span> <span class=\"o\">&amp;</span><span class=\"nt\">_address</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"nt\">address</span><span class=\"o\">(</span><span class=\"nt\">_address</span><span class=\"o\">)</span>\n<span class=\"p\">{</span>\n    <span class=\"err\">printf(&quot;Bind</span> <span class=\"err\">Address</span> <span class=\"err\">is</span> <span class=\"cp\">[</span><span class=\"o\">%</span><span class=\"nx\">s</span><span class=\"cp\">]</span><span class=\"err\">\\n&quot;,_address.c_str())</span><span class=\"p\">;</span>\n    <span class=\"err\">this-&gt;client</span> <span class=\"err\">=</span> <span class=\"n\">std</span><span class=\"p\">:</span><span class=\"o\">:</span><span class=\"n\">make_unique</span><span class=\"o\">&lt;</span><span class=\"n\">subt</span><span class=\"o\">::</span><span class=\"n\">CommsClient</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"n\">_address</span><span class=\"p\">,</span> <span class=\"n\">false</span><span class=\"p\">,</span><span class=\"n\">false</span><span class=\"p\">);</span>\n    <span class=\"err\">this-&gt;client-&gt;Bind(&amp;</span><span class=\"n\">CommsManager</span><span class=\"p\">:</span><span class=\"o\">:</span><span class=\"n\">receive_receipt</span><span class=\"p\">,</span> <span class=\"n\">this</span><span class=\"p\">,</span> <span class=\"n\">_address</span><span class=\"p\">,</span> <span class=\"n\">this-</span><span class=\"o\">&gt;</span><span class=\"n\">receipt_port</span><span class=\"p\">);</span>\n</pre></div>\n\n\n<p>Could the difference between \u2018_use_ignition\u2019 values cause the ACK sent back by the base station to be delayed in getting to the robot? Thanks!</p>", "type": "rendered"}, "created_on": "2019-09-24T20:47:07.312285+00:00", "user": {"display_name": "Joe Palk", "uuid": "{5cc8ea43-8141-495c-84a6-d43c27045e87}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cc8ea43-8141-495c-84a6-d43c27045e87%7D"}, "html": {"href": "https://bitbucket.org/%7B5cc8ea43-8141-495c-84a6-d43c27045e87%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5d234ef34b35f80c57643503/eccf6b09-606c-456e-a48e-e1b9a48f93e0/128"}}, "nickname": "jepalk", "type": "user", "account_id": "5d234ef34b35f80c57643503"}, "updated_on": null, "type": "issue_comment", "id": 54060809}