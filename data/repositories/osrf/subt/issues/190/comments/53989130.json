{"links": {"self": {"href": "data/repositories/osrf/subt/issues/190/comments/53989130.json"}, "html": {"href": "#!/osrf/subt/issues/190#comment-53989130"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/subt/issues/190.json"}}, "type": "issue", "id": 190, "repository": {"links": {"self": {"href": "data/repositories/osrf/subt.json"}, "html": {"href": "#!/osrf/subt"}, "avatar": {"href": "data/bytebucket.org/ravatar/{3c95f6ad-c304-407c-b838-09597d836552}ts=2272898"}}, "type": "repository", "name": "subt", "full_name": "osrf/subt", "uuid": "{3c95f6ad-c304-407c-b838-09597d836552}"}, "title": "/usr/bin/nvidia-container-runtime: no such file or directory: unknown"}, "content": {"raw": "Yes.  I don\u2019t see `` `MountFlags=slave` ``under service.\n\ndocker version  \nClient: Docker Engine - Community  \nVersion:           19.03.2  \nAPI version:       1.40  \nGo version:        go1.12.8  \nGit commit:        6a30dfc  \nBuilt:             Thu Aug 29 05:29:11 2019  \nOS/Arch:           linux/amd64  \nExperimental:      false\n\nServer: Docker Engine - Community  \nEngine:  \nVersion:          19.03.2  \nAPI version:      1.40 \\(minimum version 1.12\\)  \nGo version:       go1.12.8  \nGit commit:       6a30dfc  \nBuilt:            Thu Aug 29 05:27:45 2019  \nOS/Arch:          linux/amd64  \nExperimental:     false  \ncontainerd:  \nVersion:          1.2.6  \nGitCommit:        894b81a4b802e4eb2a91d1ce216b8817763c29fb  \nrunc:  \nVersion:          1.0.0-rc8  \nGitCommit:        425e105d5a03fabd737a126ad93d62a9eeede87f  \ndocker-init:  \nVersion:          0.18.0  \nGitCommit:        fec3683\n\n\u200c\n\n`systemctl cat docker`\n\n# `/lib/systemd/system/docker.service`\n\n`[Unit]`  \n`Description=Docker Application Container Engine`  \n`Documentation=https://docs.docker.com`  \n`BindsTo=containerd.service`  \n`After=network-online.target firewalld.service containerd.service`  \n`Wants=network-online.target`  \n`Requires=docker.socket`\n\n`[Service]`  \n`Type=notify`\n\n# `the default is not to use systemd for cgroups because the delegate issues still`\n\n# `exists and systemd currently does not support the cgroup feature set required`\n\n# `for containers run by docker`\n\n`ExecStart=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock`  \n`ExecReload=/bin/kill -s HUP $MAINPID`  \n`TimeoutSec=0`  \n`RestartSec=2`  \n`Restart=always`\n\n# `Note that StartLimit* options were moved from \"Service\" to \"Unit\" in systemd 229.`\n\n# `Both the old, and new location are accepted by systemd 229 and up, so using the old location`\n\n# `to make them work for either version of systemd.`\n\n`StartLimitBurst=3`\n\n# `Note that StartLimitInterval was renamed to StartLimitIntervalSec in systemd 230.`\n\n# `Both the old, and new name are accepted by systemd 230 and up, so using the old name to make`\n\n# `this option work for either version of systemd.`\n\n`StartLimitInterval=60s`\n\n# `Having non-zero Limit*s causes performance problems due to accounting overhead`\n\n# `in the kernel. We recommend using cgroups to do container-local accounting.`\n\n`LimitNOFILE=infinity`  \n`LimitNPROC=infinity`  \n`LimitCORE=infinity`\n\n# `Comment TasksMax if your systemd version does not support it.`\n\n# `Only systemd 226 and above support this option.`\n\n`TasksMax=infinity`\n\n# `set delegate yes so that systemd does not reset the cgroups of docker containers`\n\n`Delegate=yes`\n\n# `kill only the docker process, not all processes in the cgroup`\n\n`KillMode=process`\n\n`[Install]`  \n`WantedBy=multi-user.target`\n\n\u200c", "markup": "markdown", "html": "<p>Yes.  I don\u2019t see <code>`MountFlags=slave`</code>under service.</p>\n<p>docker version<br />\nClient: Docker Engine - Community<br />\nVersion:           19.03.2<br />\nAPI version:       1.40<br />\nGo version:        go1.12.8<br />\nGit commit:        <a href=\"#!/osrf/subt/commits/6a30dfc\" rel=\"nofollow\" class=\"ap-connect-link\">6a30dfc</a><br />\nBuilt:             Thu Aug 29 05:29:11 2019<br />\nOS/Arch:           linux/amd64<br />\nExperimental:      false</p>\n<p>Server: Docker Engine - Community<br />\nEngine:<br />\nVersion:          19.03.2<br />\nAPI version:      1.40 (minimum version 1.12)<br />\nGo version:       go1.12.8<br />\nGit commit:       <a href=\"#!/osrf/subt/commits/6a30dfc\" rel=\"nofollow\" class=\"ap-connect-link\">6a30dfc</a><br />\nBuilt:            Thu Aug 29 05:27:45 2019<br />\nOS/Arch:          linux/amd64<br />\nExperimental:     false<br />\ncontainerd:<br />\nVersion:          1.2.6<br />\nGitCommit:        <a href=\"#!/osrf/subt/commits/894b81a4b802e4eb2a91d1ce216b8817763c29fb\" rel=\"nofollow\" class=\"ap-connect-link\">894b81a4b802e4eb2a91d1ce216b8817763c29fb</a><br />\nrunc:<br />\nVersion:          1.0.0-rc8<br />\nGitCommit:        <a href=\"#!/osrf/subt/commits/425e105d5a03fabd737a126ad93d62a9eeede87f\" rel=\"nofollow\" class=\"ap-connect-link\">425e105d5a03fabd737a126ad93d62a9eeede87f</a><br />\ndocker-init:<br />\nVersion:          0.18.0<br />\nGitCommit:        <a href=\"#!/osrf/subt/commits/fec3683\" rel=\"nofollow\" class=\"ap-connect-link\">fec3683</a></p>\n<p>\u200c</p>\n<p><code>systemctl cat docker</code></p>\n<h1 id=\"markdown-header-libsystemdsystemdockerservice\"><code>/lib/systemd/system/docker.service</code></h1>\n<p><code>[Unit]</code><br />\n<code>Description=Docker Application Container Engine</code><br />\n<code>Documentation=https://docs.docker.com</code><br />\n<code>BindsTo=containerd.service</code><br />\n<code>After=network-online.target firewalld.service containerd.service</code><br />\n<code>Wants=network-online.target</code><br />\n<code>Requires=docker.socket</code></p>\n<p><code>[Service]</code><br />\n<code>Type=notify</code></p>\n<h1 id=\"markdown-header-the-default-is-not-to-use-systemd-for-cgroups-because-the-delegate-issues-still\"><code>the default is not to use systemd for cgroups because the delegate issues still</code></h1>\n<h1 id=\"markdown-header-exists-and-systemd-currently-does-not-support-the-cgroup-feature-set-required\"><code>exists and systemd currently does not support the cgroup feature set required</code></h1>\n<h1 id=\"markdown-header-for-containers-run-by-docker\"><code>for containers run by docker</code></h1>\n<p><code>ExecStart=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock</code><br />\n<code>ExecReload=/bin/kill -s HUP $MAINPID</code><br />\n<code>TimeoutSec=0</code><br />\n<code>RestartSec=2</code><br />\n<code>Restart=always</code></p>\n<h1 id=\"markdown-header-note-that-startlimit-options-were-moved-from-service-to-unit-in-systemd-229\"><code>Note that StartLimit* options were moved from \"Service\" to \"Unit\" in systemd 229.</code></h1>\n<h1 id=\"markdown-header-both-the-old-and-new-location-are-accepted-by-systemd-229-and-up-so-using-the-old-location\"><code>Both the old, and new location are accepted by systemd 229 and up, so using the old location</code></h1>\n<h1 id=\"markdown-header-to-make-them-work-for-either-version-of-systemd\"><code>to make them work for either version of systemd.</code></h1>\n<p><code>StartLimitBurst=3</code></p>\n<h1 id=\"markdown-header-note-that-startlimitinterval-was-renamed-to-startlimitintervalsec-in-systemd-230\"><code>Note that StartLimitInterval was renamed to StartLimitIntervalSec in systemd 230.</code></h1>\n<h1 id=\"markdown-header-both-the-old-and-new-name-are-accepted-by-systemd-230-and-up-so-using-the-old-name-to-make\"><code>Both the old, and new name are accepted by systemd 230 and up, so using the old name to make</code></h1>\n<h1 id=\"markdown-header-this-option-work-for-either-version-of-systemd\"><code>this option work for either version of systemd.</code></h1>\n<p><code>StartLimitInterval=60s</code></p>\n<h1 id=\"markdown-header-having-non-zero-limits-causes-performance-problems-due-to-accounting-overhead\"><code>Having non-zero Limit*s causes performance problems due to accounting overhead</code></h1>\n<h1 id=\"markdown-header-in-the-kernel-we-recommend-using-cgroups-to-do-container-local-accounting\"><code>in the kernel. We recommend using cgroups to do container-local accounting.</code></h1>\n<p><code>LimitNOFILE=infinity</code><br />\n<code>LimitNPROC=infinity</code><br />\n<code>LimitCORE=infinity</code></p>\n<h1 id=\"markdown-header-comment-tasksmax-if-your-systemd-version-does-not-support-it\"><code>Comment TasksMax if your systemd version does not support it.</code></h1>\n<h1 id=\"markdown-header-only-systemd-226-and-above-support-this-option\"><code>Only systemd 226 and above support this option.</code></h1>\n<p><code>TasksMax=infinity</code></p>\n<h1 id=\"markdown-header-set-delegate-yes-so-that-systemd-does-not-reset-the-cgroups-of-docker-containers\"><code>set delegate yes so that systemd does not reset the cgroups of docker containers</code></h1>\n<p><code>Delegate=yes</code></p>\n<h1 id=\"markdown-header-kill-only-the-docker-process-not-all-processes-in-the-cgroup\"><code>kill only the docker process, not all processes in the cgroup</code></h1>\n<p><code>KillMode=process</code></p>\n<p><code>[Install]</code><br />\n<code>WantedBy=multi-user.target</code></p>\n<p>\u200c</p>", "type": "rendered"}, "created_on": "2019-09-19T19:48:00.397338+00:00", "user": {"display_name": "GoRobotGo", "uuid": "{2fd8dac8-286d-461a-b7dd-dba99deea025}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2fd8dac8-286d-461a-b7dd-dba99deea025%7D"}, "html": {"href": "https://bitbucket.org/%7B2fd8dac8-286d-461a-b7dd-dba99deea025%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/6431739b101c18640b5a84d359fdd274d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsG-4.png"}}, "nickname": "GoRobotGo", "type": "user", "account_id": "557058:44b40072-c04b-41ae-ad09-376db9ebffa1"}, "updated_on": null, "type": "issue_comment", "id": 53989130}