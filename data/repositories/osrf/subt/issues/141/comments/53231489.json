{"links": {"self": {"href": "data/repositories/osrf/subt/issues/141/comments/53231489.json"}, "html": {"href": "#!/osrf/subt/issues/141#comment-53231489"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/subt/issues/141.json"}}, "type": "issue", "id": 141, "repository": {"links": {"self": {"href": "data/repositories/osrf/subt.json"}, "html": {"href": "#!/osrf/subt"}, "avatar": {"href": "data/bytebucket.org/ravatar/{3c95f6ad-c304-407c-b838-09597d836552}ts=2272898"}}, "type": "repository", "name": "subt", "full_name": "osrf/subt", "uuid": "{3c95f6ad-c304-407c-b838-09597d836552}"}, "title": "Issue with camera_info topics"}, "content": {"raw": "All the models on Fuel have been updated. Clearing your cache and downloading them all again should fix image distortions.\n\nFor the baseline, I have 2 PRs open:\n\n* https://bitbucket.org/ignitionrobotics/ign-sensors/pull-requests/84/\n* https://bitbucket.org/ignitionrobotics/ign-gazebo/pull-requests/406/\n\nThe approach is to calculate the baseline automatically according to the camera sensor poses. Interestingly, the baseline for Gazebo-9-SubT was not precise. The value 0.07m was hardcoded for all cameras, but for `X1_C5` for example, the distance between the cameras is `0.2m` (both on Gazebo and on Ignition). Using the PRs above, the correct value will be used.\n\nAlso, Gazebo 9 was using the baseline for both the left and the right cameras. However, according to [this](http://docs.ros.org/melodic/api/sensor_msgs/html/msg/CameraInfo.html) documentation, the baseline should be zero for the left camera. The new implementation also fixes that.\n\nIn summary, this is how the matrices have evolved for `X1_C5`:\n\n## Gazebo 9\n\n### left\n\n`P: [1108.509382382374, 0.0, 640.5, -77.5956567667662, 0.0, 1108.509382382374, 480.5, 0.0, 0.0, 0.0, 1.0, 0.0]`\n\n### right\n\n`P: [1108.509382382374, 0.0, 640.5, -77.5956567667662, 0.0, 1108.509382382374, 480.5, 0.0, 0.0, 0.0, 1.0, 0.0]`\n\n## Ignition, with old models and without the PRs\n\n### left\n\n`P: [277.0, 0.0, 160.0, 0.0, 0.0, 277.0, 120.0, 0.0, 0.0, 0.0, 1.0, 0.0]`\n\n### right\n\n`P: [277.0, 0.0, 160.0, 0.0, 0.0, 277.0, 120.0, 0.0, 0.0, 0.0, 1.0, 0.0]`\n\n## Ignition, with new models and the PRs\n\n### left\n\n`P: [1108.5, 0.0, 640.5, -0.0, 0.0, 1108.5, 480.5, 0.0, 0.0, 0.0, 1.0, 0.0]`\n\n### right\n\n`P: [1108.5, 0.0, 640.5, -221.70000000000002, 0.0, 1108.5, 480.5, 0.0, 0.0, 0.0, 1.0, 0.0]`", "markup": "markdown", "html": "<p>All the models on Fuel have been updated. Clearing your cache and downloading them all again should fix image distortions.</p>\n<p>For the baseline, I have 2 PRs open:</p>\n<ul>\n<li><a href=\"https://bitbucket.org/ignitionrobotics/ign-sensors/pull-requests/84/\" rel=\"nofollow\" class=\"ap-connect-link\">https://bitbucket.org/ignitionrobotics/ign-sensors/pull-requests/84/</a></li>\n<li><a href=\"https://bitbucket.org/ignitionrobotics/ign-gazebo/pull-requests/406/\" rel=\"nofollow\" class=\"ap-connect-link\">https://bitbucket.org/ignitionrobotics/ign-gazebo/pull-requests/406/</a></li>\n</ul>\n<p>The approach is to calculate the baseline automatically according to the camera sensor poses. Interestingly, the baseline for Gazebo-9-SubT was not precise. The value 0.07m was hardcoded for all cameras, but for <code>X1_C5</code> for example, the distance between the cameras is <code>0.2m</code> (both on Gazebo and on Ignition). Using the PRs above, the correct value will be used.</p>\n<p>Also, Gazebo 9 was using the baseline for both the left and the right cameras. However, according to <a data-is-external-link=\"true\" href=\"http://docs.ros.org/melodic/api/sensor_msgs/html/msg/CameraInfo.html\" rel=\"nofollow\">this</a> documentation, the baseline should be zero for the left camera. The new implementation also fixes that.</p>\n<p>In summary, this is how the matrices have evolved for <code>X1_C5</code>:</p>\n<h2 id=\"markdown-header-gazebo-9\">Gazebo 9</h2>\n<h3 id=\"markdown-header-left\">left</h3>\n<p><code>P: [1108.509382382374, 0.0, 640.5, -77.5956567667662, 0.0, 1108.509382382374, 480.5, 0.0, 0.0, 0.0, 1.0, 0.0]</code></p>\n<h3 id=\"markdown-header-right\">right</h3>\n<p><code>P: [1108.509382382374, 0.0, 640.5, -77.5956567667662, 0.0, 1108.509382382374, 480.5, 0.0, 0.0, 0.0, 1.0, 0.0]</code></p>\n<h2 id=\"markdown-header-ignition-with-old-models-and-without-the-prs\">Ignition, with old models and without the PRs</h2>\n<h3 id=\"markdown-header-left_1\">left</h3>\n<p><code>P: [277.0, 0.0, 160.0, 0.0, 0.0, 277.0, 120.0, 0.0, 0.0, 0.0, 1.0, 0.0]</code></p>\n<h3 id=\"markdown-header-right_1\">right</h3>\n<p><code>P: [277.0, 0.0, 160.0, 0.0, 0.0, 277.0, 120.0, 0.0, 0.0, 0.0, 1.0, 0.0]</code></p>\n<h2 id=\"markdown-header-ignition-with-new-models-and-the-prs\">Ignition, with new models and the PRs</h2>\n<h3 id=\"markdown-header-left_2\">left</h3>\n<p><code>P: [1108.5, 0.0, 640.5, -0.0, 0.0, 1108.5, 480.5, 0.0, 0.0, 0.0, 1.0, 0.0]</code></p>\n<h3 id=\"markdown-header-right_2\">right</h3>\n<p><code>P: [1108.5, 0.0, 640.5, -221.70000000000002, 0.0, 1108.5, 480.5, 0.0, 0.0, 0.0, 1.0, 0.0]</code></p>", "type": "rendered"}, "created_on": "2019-07-31T23:16:29.347684+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": null, "type": "issue_comment", "id": 53231489}