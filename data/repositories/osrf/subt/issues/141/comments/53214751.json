{"links": {"self": {"href": "data/repositories/osrf/subt/issues/141/comments/53214751.json"}, "html": {"href": "#!/osrf/subt/issues/141#comment-53214751"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/subt/issues/141.json"}}, "type": "issue", "id": 141, "repository": {"links": {"self": {"href": "data/repositories/osrf/subt.json"}, "html": {"href": "#!/osrf/subt"}, "avatar": {"href": "data/bytebucket.org/ravatar/{3c95f6ad-c304-407c-b838-09597d836552}ts=2272898"}}, "type": "repository", "name": "subt", "full_name": "osrf/subt", "uuid": "{3c95f6ad-c304-407c-b838-09597d836552}"}, "title": "Issue with camera_info topics"}, "content": {"raw": "The current models are missing their camera intrinsic parameters, so they're all using the default values, which should be causing the distortion on your end.\n\nWe need to update the models on Fuel. Meanwhile, you can try locally editing your models by adding the `<lens>` tag as follows for the 1280x960 cameras:\n\n```.xml\n<sensor ...>\n  <camera ...>\n                    <lens>\n                        <intrinsics>\n                          <!-- fx = fy = width / ( 2 * tan (hfov / 2 ) ) -->\n                          <fx>1108.5</fx>\n                          <fy>1108.5</fy>\n                          <!-- cx = ( width + 1 ) / 2 -->\n                          <cx>640.5</cx>\n                          <!-- cy = ( height + 1 ) / 2 -->\n                          <cy>480.5</cy>\n                          <s>0</s>\n                        </intrinsics>\n                    </lens>\n...\n```\n\nAs for the 4th value in the P matrix (i.e. `Tx = -fx' * baseline`), it's currently hardcoded to zero. I'll work on a fix so the right camera of a stereo camera gets this value, while it remains zero for the left camera, and all non-stereo cameras.", "markup": "markdown", "html": "<p>The current models are missing their camera intrinsic parameters, so they're all using the default values, which should be causing the distortion on your end.</p>\n<p>We need to update the models on Fuel. Meanwhile, you can try locally editing your models by adding the <code>&lt;lens&gt;</code> tag as follows for the 1280x960 cameras:</p>\n<div class=\"codehilite language-xml\"><pre><span></span><span class=\"nt\">&lt;sensor</span> <span class=\"err\">...</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;camera</span> <span class=\"err\">...</span><span class=\"nt\">&gt;</span>\n                    <span class=\"nt\">&lt;lens&gt;</span>\n                        <span class=\"nt\">&lt;intrinsics&gt;</span>\n                          <span class=\"c\">&lt;!-- fx = fy = width / ( 2 * tan (hfov / 2 ) ) --&gt;</span>\n                          <span class=\"nt\">&lt;fx&gt;</span>1108.5<span class=\"nt\">&lt;/fx&gt;</span>\n                          <span class=\"nt\">&lt;fy&gt;</span>1108.5<span class=\"nt\">&lt;/fy&gt;</span>\n                          <span class=\"c\">&lt;!-- cx = ( width + 1 ) / 2 --&gt;</span>\n                          <span class=\"nt\">&lt;cx&gt;</span>640.5<span class=\"nt\">&lt;/cx&gt;</span>\n                          <span class=\"c\">&lt;!-- cy = ( height + 1 ) / 2 --&gt;</span>\n                          <span class=\"nt\">&lt;cy&gt;</span>480.5<span class=\"nt\">&lt;/cy&gt;</span>\n                          <span class=\"nt\">&lt;s&gt;</span>0<span class=\"nt\">&lt;/s&gt;</span>\n                        <span class=\"nt\">&lt;/intrinsics&gt;</span>\n                    <span class=\"nt\">&lt;/lens&gt;</span>\n...\n</pre></div>\n\n\n<p>As for the 4th value in the P matrix (i.e. <code>Tx = -fx' * baseline</code>), it's currently hardcoded to zero. I'll work on a fix so the right camera of a stereo camera gets this value, while it remains zero for the left camera, and all non-stereo cameras.</p>", "type": "rendered"}, "created_on": "2019-07-30T23:52:48.119886+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2019-07-30T23:53:57.962884+00:00", "type": "issue_comment", "id": 53214751}