{"priority": "minor", "kind": "enhancement", "repository": {"links": {"self": {"href": "data/repositories/osrf/subt.json"}, "html": {"href": "#!/osrf/subt"}, "avatar": {"href": "data/bytebucket.org/ravatar/{3c95f6ad-c304-407c-b838-09597d836552}ts=2272898"}}, "type": "repository", "name": "subt", "full_name": "osrf/subt", "uuid": "{3c95f6ad-c304-407c-b838-09597d836552}"}, "links": {"attachments": {"href": "data/repositories/osrf/subt/issues/287/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/subt/issues/287.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/subt/issues/287/watch"}, "comments": {"href": "data/repositories/osrf/subt/issues/287/comments_page=1.json"}, "html": {"href": "#!/osrf/subt/issues/287/ruby-using-all-gpu-memory"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/subt/issues/287/vote"}}, "reporter": {"display_name": "Steven Gray", "uuid": "{7470e809-c304-4b17-b986-685f31fa15c3}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D"}, "html": {"href": "https://bitbucket.org/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/e6bee642b76507eb51c2839771722e68d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSG-0.png"}}, "nickname": "stgray", "type": "user", "account_id": "557058:e6cc7c7b-9d1b-4abe-87d5-5f0da7c863e1"}, "title": "Ruby using all GPU memory", "component": null, "votes": 0, "watches": 6, "content": {"raw": "Running just the urban circuit practice \\(installed in a catkin workspace\\)  leads to Ruby allocating almost all GPU memory.  I do see that the requirements page was recently updated with 4GB VRAM minimum.  Is this expected to grow?\r\n\r\nRan with `ign launch -v 4 urban_circuit.ign worldName:=urban_circuit_practice_01 robotName1:=X1 robotConfig1:=X1_SENSOR_CONFIG_3`\r\n\r\n```\r\n+-----------------------------------------------------------------------------+\r\n| NVIDIA-SMI 435.21       Driver Version: 435.21       CUDA Version: 10.1     |\r\n|-------------------------------+----------------------+----------------------+\r\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\r\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\r\n|===============================+======================+======================|\r\n|   0  Quadro P1000        Off  | 00000000:01:00.0 Off |                  N/A |\r\n| N/A   66C    P0    N/A /  N/A |   3839MiB /  4042MiB |    100%      Default |\r\n+-------------------------------+----------------------+----------------------+\r\n                                                                               \r\n+-----------------------------------------------------------------------------+\r\n| Processes:                                                       GPU Memory |\r\n|  GPU       PID   Type   Process name                             Usage      |\r\n|=============================================================================|\r\n|    0      2934      G   /usr/lib/xorg/Xorg                           381MiB |\r\n|    0      8774      G   ...uest-channel-token=14576248302439056819    72MiB |\r\n|    0     24967      G   /usr/bin/ruby                               1473MiB |\r\n|    0     24972      G   /usr/bin/ruby                               1762MiB |\r\n|    0     26106      G   gnome-shell                                  145MiB |\r\n+-----------------------------------------------------------------------------+\r\n```\r\n\r\nRunning `urban_qual` instead led to lower usage:\r\n\r\n```\r\n+-----------------------------------------------------------------------------+\r\n| NVIDIA-SMI 435.21       Driver Version: 435.21       CUDA Version: 10.1     |\r\n|-------------------------------+----------------------+----------------------+\r\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\r\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\r\n|===============================+======================+======================|\r\n|   0  Quadro P1000        Off  | 00000000:01:00.0 Off |                  N/A |\r\n| N/A   56C    P0    N/A /  N/A |   1910MiB /  4042MiB |     96%      Default |\r\n+-------------------------------+----------------------+----------------------+\r\n                                                                               \r\n+-----------------------------------------------------------------------------+\r\n| Processes:                                                       GPU Memory |\r\n|  GPU       PID   Type   Process name                             Usage      |\r\n|=============================================================================|\r\n|    0      2934      G   /usr/lib/xorg/Xorg                           360MiB |\r\n|    0      8774      G   ...uest-channel-token=14576248302439056819    71MiB |\r\n|    0     26106      G   gnome-shell                                  149MiB |\r\n|    0     26704      G   /usr/bin/ruby                                473MiB |\r\n|    0     26709      G   /usr/bin/ruby                                854MiB |\r\n+-----------------------------------------------------------------------------+\r\n```\r\n\r\n\u200c", "markup": "markdown", "html": "<p>Running just the urban circuit practice (installed in a catkin workspace)  leads to Ruby allocating almost all GPU memory.  I do see that the requirements page was recently updated with 4GB VRAM minimum.  Is this expected to grow?</p>\n<p>Ran with <code>ign launch -v 4 urban_circuit.ign worldName:=urban_circuit_practice_01 robotName1:=X1 robotConfig1:=X1_SENSOR_CONFIG_3</code></p>\n<div class=\"codehilite\"><pre><span></span>+-----------------------------------------------------------------------------+\n| NVIDIA-SMI 435.21       Driver Version: 435.21       CUDA Version: 10.1     |\n|-------------------------------+----------------------+----------------------+\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\n|===============================+======================+======================|\n|   0  Quadro P1000        Off  | 00000000:01:00.0 Off |                  N/A |\n| N/A   66C    P0    N/A /  N/A |   3839MiB /  4042MiB |    100%      Default |\n+-------------------------------+----------------------+----------------------+\n\n+-----------------------------------------------------------------------------+\n| Processes:                                                       GPU Memory |\n|  GPU       PID   Type   Process name                             Usage      |\n|=============================================================================|\n|    0      2934      G   /usr/lib/xorg/Xorg                           381MiB |\n|    0      8774      G   ...uest-channel-token=14576248302439056819    72MiB |\n|    0     24967      G   /usr/bin/ruby                               1473MiB |\n|    0     24972      G   /usr/bin/ruby                               1762MiB |\n|    0     26106      G   gnome-shell                                  145MiB |\n+-----------------------------------------------------------------------------+\n</pre></div>\n\n\n<p>Running <code>urban_qual</code> instead led to lower usage:</p>\n<div class=\"codehilite\"><pre><span></span>+-----------------------------------------------------------------------------+\n| NVIDIA-SMI 435.21       Driver Version: 435.21       CUDA Version: 10.1     |\n|-------------------------------+----------------------+----------------------+\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\n|===============================+======================+======================|\n|   0  Quadro P1000        Off  | 00000000:01:00.0 Off |                  N/A |\n| N/A   56C    P0    N/A /  N/A |   1910MiB /  4042MiB |     96%      Default |\n+-------------------------------+----------------------+----------------------+\n\n+-----------------------------------------------------------------------------+\n| Processes:                                                       GPU Memory |\n|  GPU       PID   Type   Process name                             Usage      |\n|=============================================================================|\n|    0      2934      G   /usr/lib/xorg/Xorg                           360MiB |\n|    0      8774      G   ...uest-channel-token=14576248302439056819    71MiB |\n|    0     26106      G   gnome-shell                                  149MiB |\n|    0     26704      G   /usr/bin/ruby                                473MiB |\n|    0     26709      G   /usr/bin/ruby                                854MiB |\n+-----------------------------------------------------------------------------+\n</pre></div>\n\n\n<p>\u200c</p>", "type": "rendered"}, "assignee": null, "state": "resolved", "version": null, "edited_on": null, "created_on": "2019-12-06T05:56:23.895654+00:00", "milestone": null, "updated_on": "2020-02-21T21:52:24.484292+00:00", "type": "issue", "id": 287}