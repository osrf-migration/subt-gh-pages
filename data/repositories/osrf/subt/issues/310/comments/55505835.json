{"links": {"self": {"href": "data/repositories/osrf/subt/issues/310/comments/55505835.json"}, "html": {"href": "#!/osrf/subt/issues/310#comment-55505835"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/subt/issues/310.json"}}, "type": "issue", "id": 310, "repository": {"links": {"self": {"href": "data/repositories/osrf/subt.json"}, "html": {"href": "#!/osrf/subt"}, "avatar": {"href": "data/bytebucket.org/ravatar/{3c95f6ad-c304-407c-b838-09597d836552}ts=2272898"}}, "type": "repository", "name": "subt", "full_name": "osrf/subt", "uuid": "{3c95f6ad-c304-407c-b838-09597d836552}"}, "title": "Wrong acceleration readings from IMU in rotors"}, "content": {"raw": "@{557058:90bc87b0-2886-4377-a17c-3a6629a697ff} , Can you please be more specific on how you tested the accuracy of the IMU? Here is how we did the validation, and a plot showing the results:\n\nWe have created an Ignition Gazebo plugin and modified the rotor model file to load it. At every simulation loop, we extract in the PostUpdate method of the plugin the actual linear velocity in the inertial frame of the robot and then we differentiate assuming a frequency of 250hz in order to get the acceleration \\(since the physics solver is based on velocity stepping scheme there is no acceleration in the state of the simulator\\), Once we have the linear acceleration expressed in the inertial frame we add the gravity vector and express the resultant quantity in the body frame of the robot. Attached you will find a plot of the measured IMU signal and what we expect it to be \\(in the namespace /im\\)\n\nJust to make sure, we are assuming that the transformation between the IMU and the base\\_link of the robot is the identity.\n\nYou could easily reproduce these results from inside the new rotor velocity controller that you have developed.\n\nI am using a catkin workspace, I really hope that this is not related to the problem.\n\nParallel to this please fix the other existing [problem](#!/osrf/subt/issues/307/unstable-rotor-control), it is really difficult to work when the robot crashes randomly and you don\u2019t know if its the controller\u2019s fault or a disc access.\n\n![](data/bitbucket.org/repo/8ze6Mjd/images/2845062503-imu_comparison.png)\n\u200c", "markup": "markdown", "html": "<p><span class=\"ap-mention\" data-atlassian-id=\"557058:90bc87b0-2886-4377-a17c-3a6629a697ff\">@Addisu Z. Taddese</span> , Can you please be more specific on how you tested the accuracy of the IMU? Here is how we did the validation, and a plot showing the results:</p>\n<p>We have created an Ignition Gazebo plugin and modified the rotor model file to load it. At every simulation loop, we extract in the PostUpdate method of the plugin the actual linear velocity in the inertial frame of the robot and then we differentiate assuming a frequency of 250hz in order to get the acceleration (since the physics solver is based on velocity stepping scheme there is no acceleration in the state of the simulator), Once we have the linear acceleration expressed in the inertial frame we add the gravity vector and express the resultant quantity in the body frame of the robot. Attached you will find a plot of the measured IMU signal and what we expect it to be (in the namespace /im)</p>\n<p>Just to make sure, we are assuming that the transformation between the IMU and the base_link of the robot is the identity.</p>\n<p>You could easily reproduce these results from inside the new rotor velocity controller that you have developed.</p>\n<p>I am using a catkin workspace, I really hope that this is not related to the problem.</p>\n<p>Parallel to this please fix the other existing <a data-is-external-link=\"true\" href=\"#!/osrf/subt/issues/307/unstable-rotor-control\" rel=\"nofollow\">problem</a>, it is really difficult to work when the robot crashes randomly and you don\u2019t know if its the controller\u2019s fault or a disc access.</p>\n<p><img alt=\"\" src=\"data/bitbucket.org/repo/8ze6Mjd/images/2845062503-imu_comparison.png\" />\n\u200c</p>", "type": "rendered"}, "created_on": "2020-01-02T20:52:39.945414+00:00", "user": {"display_name": "Carlos Thomson", "uuid": "{17e179d2-ff38-4f55-85d6-85b930a107c0}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B17e179d2-ff38-4f55-85d6-85b930a107c0%7D"}, "html": {"href": "https://bitbucket.org/%7B17e179d2-ff38-4f55-85d6-85b930a107c0%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/abe9911efd3561d5370b946b2a6eb66ad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCT-6.png"}}, "nickname": "Carlos Thomson", "type": "user", "account_id": "5d4999e10fa6d40d14fc61f3"}, "updated_on": "2020-01-02T20:55:44.165858+00:00", "type": "issue_comment", "id": 55505835}