{"links": {"self": {"href": "data/repositories/osrf/subt/issues/193/comments/54006124.json"}, "html": {"href": "#!/osrf/subt/issues/193#comment-54006124"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/subt/issues/193.json"}}, "type": "issue", "id": 193, "repository": {"links": {"self": {"href": "data/repositories/osrf/subt.json"}, "html": {"href": "#!/osrf/subt"}, "avatar": {"href": "data/bytebucket.org/ravatar/{3c95f6ad-c304-407c-b838-09597d836552}ts=2272898"}}, "type": "repository", "name": "subt", "full_name": "osrf/subt", "uuid": "{3c95f6ad-c304-407c-b838-09597d836552}"}, "title": "AWS cloudsim_sim version?"}, "content": {"raw": "Well, I based our solution image on `osrf/subt-virtual-testbed:subt_solution_latest` and fails to build now:\n\n\u200c\n\n```\nabort: there is no Mercurial repository here (.hg not found)\nSending build context to Docker daemon  2.048kB\nStep 1/4 : FROM osrf/subt-virtual-testbed:subt_solution_latest\n ---> bc0376256a85\nStep 2/4 : RUN /usr/bin/python3 -m pip install --user --no-cache-dir msgpack pyserial \"opencv-python>3.4.2,<4\"\n ---> Running in 887bb86af10b\nException:\nTraceback (most recent call last):\n  File \"/usr/lib/python3/dist-packages/pip/basecommand.py\", line 215, in main\n    status = self.run(options, args)\n  File \"/usr/lib/python3/dist-packages/pip/commands/install.py\", line 307, in run\n    delete=build_delete) as build_dir:\n  File \"/usr/lib/python3/dist-packages/pip/utils/build.py\", line 22, in __init__\n    name = os.path.realpath(tempfile.mkdtemp(prefix=\"pip-build-\"))\n  File \"/usr/lib/python3.6/tempfile.py\", line 499, in mkdtemp\n    prefix, suffix, dir, output_type = _sanitize_params(prefix, suffix, dir)\n  File \"/usr/lib/python3.6/tempfile.py\", line 269, in _sanitize_params\n    dir = gettempdir()\n  File \"/usr/lib/python3.6/tempfile.py\", line 437, in gettempdir\n    tempdir = _get_default_tempdir()\n  File \"/usr/lib/python3.6/tempfile.py\", line 372, in _get_default_tempdir\n    dirlist)\nFileNotFoundError: [Errno 2] No usable temporary directory found in ['/tmp', '/var/tmp', '/usr/tmp', '/home/developer/subt_solution']\n```\n\nI am not really sure what change from the version I had from last week :disappointed: \n\nWhat is the recommended base docker image on which we should build our solution? \\(yes, that should be separate issue/question\\)", "markup": "markdown", "html": "<p>Well, I based our solution image on <code>osrf/subt-virtual-testbed:subt_solution_latest</code> and fails to build now:</p>\n<p>\u200c</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"n\">abort</span><span class=\"o\">:</span> <span class=\"n\">there</span> <span class=\"k\">is</span> <span class=\"n\">no</span> <span class=\"n\">Mercurial</span> <span class=\"n\">repository</span> <span class=\"n\">here</span> <span class=\"o\">(.</span><span class=\"n\">hg</span> <span class=\"n\">not</span> <span class=\"n\">found</span><span class=\"o\">)</span>\n<span class=\"n\">Sending</span> <span class=\"n\">build</span> <span class=\"n\">context</span> <span class=\"n\">to</span> <span class=\"n\">Docker</span> <span class=\"n\">daemon</span>  <span class=\"mf\">2.048</span><span class=\"n\">kB</span>\n<span class=\"n\">Step</span> <span class=\"mi\">1</span><span class=\"sr\">/4 : FROM osrf/s</span><span class=\"n\">ubt</span><span class=\"o\">-</span><span class=\"n\">virtual</span><span class=\"o\">-</span><span class=\"n\">testbed</span><span class=\"o\">:</span><span class=\"n\">subt_solution_latest</span>\n <span class=\"o\">---&gt;</span> <span class=\"n\">bc0376256a85</span>\n<span class=\"n\">Step</span> <span class=\"mi\">2</span><span class=\"sr\">/4 : RUN /usr/bin/</span><span class=\"n\">python3</span> <span class=\"o\">-</span><span class=\"n\">m</span> <span class=\"n\">pip</span> <span class=\"n\">install</span> <span class=\"o\">--</span><span class=\"n\">user</span> <span class=\"o\">--</span><span class=\"n\">no</span><span class=\"o\">-</span><span class=\"n\">cache</span><span class=\"o\">-</span><span class=\"n\">dir</span> <span class=\"n\">msgpack</span> <span class=\"n\">pyserial</span> <span class=\"s2\">&quot;opencv-python&gt;3.4.2,&lt;4&quot;</span>\n <span class=\"o\">---&gt;</span> <span class=\"n\">Running</span> <span class=\"k\">in</span> <span class=\"mi\">887</span><span class=\"n\">bb86af10b</span>\n<span class=\"n\">Exception</span><span class=\"o\">:</span>\n<span class=\"n\">Traceback</span> <span class=\"o\">(</span><span class=\"n\">most</span> <span class=\"n\">recent</span> <span class=\"n\">call</span> <span class=\"n\">last</span><span class=\"o\">):</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;/usr/lib/python3/dist-packages/pip/basecommand.py&quot;</span><span class=\"o\">,</span> <span class=\"n\">line</span> <span class=\"mi\">215</span><span class=\"o\">,</span> <span class=\"k\">in</span> <span class=\"n\">main</span>\n    <span class=\"n\">status</span> <span class=\"o\">=</span> <span class=\"n\">self</span><span class=\"o\">.</span><span class=\"na\">run</span><span class=\"o\">(</span><span class=\"n\">options</span><span class=\"o\">,</span> <span class=\"n\">args</span><span class=\"o\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;/usr/lib/python3/dist-packages/pip/commands/install.py&quot;</span><span class=\"o\">,</span> <span class=\"n\">line</span> <span class=\"mi\">307</span><span class=\"o\">,</span> <span class=\"k\">in</span> <span class=\"n\">run</span>\n    <span class=\"n\">delete</span><span class=\"o\">=</span><span class=\"n\">build_delete</span><span class=\"o\">)</span> <span class=\"k\">as</span> <span class=\"n\">build_dir</span><span class=\"o\">:</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;/usr/lib/python3/dist-packages/pip/utils/build.py&quot;</span><span class=\"o\">,</span> <span class=\"n\">line</span> <span class=\"mi\">22</span><span class=\"o\">,</span> <span class=\"k\">in</span> <span class=\"n\">__init__</span>\n    <span class=\"n\">name</span> <span class=\"o\">=</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"na\">path</span><span class=\"o\">.</span><span class=\"na\">realpath</span><span class=\"o\">(</span><span class=\"n\">tempfile</span><span class=\"o\">.</span><span class=\"na\">mkdtemp</span><span class=\"o\">(</span><span class=\"n\">prefix</span><span class=\"o\">=</span><span class=\"s2\">&quot;pip-build-&quot;</span><span class=\"o\">))</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;/usr/lib/python3.6/tempfile.py&quot;</span><span class=\"o\">,</span> <span class=\"n\">line</span> <span class=\"mi\">499</span><span class=\"o\">,</span> <span class=\"k\">in</span> <span class=\"n\">mkdtemp</span>\n    <span class=\"n\">prefix</span><span class=\"o\">,</span> <span class=\"n\">suffix</span><span class=\"o\">,</span> <span class=\"n\">dir</span><span class=\"o\">,</span> <span class=\"n\">output_type</span> <span class=\"o\">=</span> <span class=\"n\">_sanitize_params</span><span class=\"o\">(</span><span class=\"n\">prefix</span><span class=\"o\">,</span> <span class=\"n\">suffix</span><span class=\"o\">,</span> <span class=\"n\">dir</span><span class=\"o\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;/usr/lib/python3.6/tempfile.py&quot;</span><span class=\"o\">,</span> <span class=\"n\">line</span> <span class=\"mi\">269</span><span class=\"o\">,</span> <span class=\"k\">in</span> <span class=\"n\">_sanitize_params</span>\n    <span class=\"n\">dir</span> <span class=\"o\">=</span> <span class=\"n\">gettempdir</span><span class=\"o\">()</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;/usr/lib/python3.6/tempfile.py&quot;</span><span class=\"o\">,</span> <span class=\"n\">line</span> <span class=\"mi\">437</span><span class=\"o\">,</span> <span class=\"k\">in</span> <span class=\"n\">gettempdir</span>\n    <span class=\"n\">tempdir</span> <span class=\"o\">=</span> <span class=\"n\">_get_default_tempdir</span><span class=\"o\">()</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;/usr/lib/python3.6/tempfile.py&quot;</span><span class=\"o\">,</span> <span class=\"n\">line</span> <span class=\"mi\">372</span><span class=\"o\">,</span> <span class=\"k\">in</span> <span class=\"n\">_get_default_tempdir</span>\n    <span class=\"n\">dirlist</span><span class=\"o\">)</span>\n<span class=\"n\">FileNotFoundError</span><span class=\"o\">:</span> <span class=\"o\">[</span><span class=\"n\">Errno</span> <span class=\"mi\">2</span><span class=\"o\">]</span> <span class=\"n\">No</span> <span class=\"n\">usable</span> <span class=\"n\">temporary</span> <span class=\"n\">directory</span> <span class=\"n\">found</span> <span class=\"k\">in</span> <span class=\"o\">[</span><span class=\"s1\">&#39;/tmp&#39;</span><span class=\"o\">,</span> <span class=\"s1\">&#39;/var/tmp&#39;</span><span class=\"o\">,</span> <span class=\"s1\">&#39;/usr/tmp&#39;</span><span class=\"o\">,</span> <span class=\"s1\">&#39;/home/developer/subt_solution&#39;</span><span class=\"o\">]</span>\n</pre></div>\n\n\n<p>I am not really sure what change from the version I had from last week <img class=\"emoji\" src=\"data/pf-emoji-service--cdn.us-east-1.prod.public.atl-paas.net/standard/551c9814-1d37-4573-819d-afab3afeaf32/48x48/1f61e.png\" alt=\"\ud83d\ude1e\" title=\":disappointed:\" data-emoji-short-name=\":disappointed:\" /> </p>\n<p>What is the recommended base docker image on which we should build our solution? (yes, that should be separate issue/question)</p>", "type": "rendered"}, "created_on": "2019-09-20T20:09:36.999010+00:00", "user": {"display_name": "Martin Dlouhy", "uuid": "{27de76db-249c-44be-9eb8-91a3b17bf0d7}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B27de76db-249c-44be-9eb8-91a3b17bf0d7%7D"}, "html": {"href": "https://bitbucket.org/%7B27de76db-249c-44be-9eb8-91a3b17bf0d7%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/85a9b1d43839b393296feb3b35a2e577d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsMD-1.png"}}, "nickname": "robotikacz", "type": "user", "account_id": "557058:490c665b-b69c-40f3-80ea-64f20747efc4"}, "updated_on": null, "type": "issue_comment", "id": 54006124}