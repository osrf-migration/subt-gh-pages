{"links": {"self": {"href": "data/repositories/osrf/subt/issues/192/comments/53992248.json"}, "html": {"href": "#!/osrf/subt/issues/192#comment-53992248"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/subt/issues/192.json"}}, "type": "issue", "id": 192, "repository": {"links": {"self": {"href": "data/repositories/osrf/subt.json"}, "html": {"href": "#!/osrf/subt"}, "avatar": {"href": "data/bytebucket.org/ravatar/{3c95f6ad-c304-407c-b838-09597d836552}ts=2272898"}}, "type": "repository", "name": "subt", "full_name": "osrf/subt", "uuid": "{3c95f6ad-c304-407c-b838-09597d836552}"}, "title": "Image Solution runs with catkin setup but not using docker compose"}, "content": {"raw": "Hi Hector,\n\nI guess this is a CUDA\\+OpenGL support issue either from Nvidia or Docker. Let\u2019s hope to find out. Are your running the `catkin method` and the `docker-compose method` in the same machine/system? Can you provide the exact error you are getting?\n\nCan you also run the following commands and post the output back here?\n\n```\n$ docker -v\n\n$ docker-compose -v\n```\n\nFinally, make sure you added the content below into the `/etc/docker/daemon.json` file for `--runtime=nvidia` to work.\n\n```\n$ cd /etc/docker/\n$ sudo vim daemon.json\n\n# Add this into the file:\n\n{\n          \"runtimes\": {\n              \"nvidia\": {\n                  \"path\": \"/usr/bin/nvidia-container-runtime\",\n                  \"runtimeArgs\": []\n              }\n          }\n}\n\n$ sudo service docker restart\n```\n\n\u200c", "markup": "markdown", "html": "<p>Hi Hector,</p>\n<p>I guess this is a CUDA+OpenGL support issue either from Nvidia or Docker. Let\u2019s hope to find out. Are your running the <code>catkin method</code> and the <code>docker-compose method</code> in the same machine/system? Can you provide the exact error you are getting?</p>\n<p>Can you also run the following commands and post the output back here?</p>\n<div class=\"codehilite\"><pre><span></span>$ docker -v\n\n$ docker-compose -v\n</pre></div>\n\n\n<p>Finally, make sure you added the content below into the <code>/etc/docker/daemon.json</code> file for <code>--runtime=nvidia</code> to work.</p>\n<div class=\"codehilite\"><pre><span></span>$ <span class=\"nb\">cd</span> /etc/docker/\n$ sudo vim daemon.json\n\n<span class=\"c1\"># Add this into the file:</span>\n\n<span class=\"o\">{</span>\n          <span class=\"s2\">&quot;runtimes&quot;</span>: <span class=\"o\">{</span>\n              <span class=\"s2\">&quot;nvidia&quot;</span>: <span class=\"o\">{</span>\n                  <span class=\"s2\">&quot;path&quot;</span>: <span class=\"s2\">&quot;/usr/bin/nvidia-container-runtime&quot;</span>,\n                  <span class=\"s2\">&quot;runtimeArgs&quot;</span>: <span class=\"o\">[]</span>\n              <span class=\"o\">}</span>\n          <span class=\"o\">}</span>\n<span class=\"o\">}</span>\n\n$ sudo service docker restart\n</pre></div>\n\n\n<p>\u200c</p>", "type": "rendered"}, "created_on": "2019-09-20T00:48:44.900796+00:00", "user": {"display_name": "Alfredo Bencomo", "uuid": "{84891a71-dff2-4b97-8891-9446c16e6f89}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B84891a71-dff2-4b97-8891-9446c16e6f89%7D"}, "html": {"href": "https://bitbucket.org/%7B84891a71-dff2-4b97-8891-9446c16e6f89%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cf75629ff02b50ea27b2817/82be1d48-d490-4d7b-8ddb-a8093b9417a6/128"}}, "nickname": "bencomo", "type": "user", "account_id": "5cf75629ff02b50ea27b2817"}, "updated_on": "2019-09-20T00:57:09.731832+00:00", "type": "issue_comment", "id": 53992248}