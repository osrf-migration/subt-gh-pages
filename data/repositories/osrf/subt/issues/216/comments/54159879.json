{"links": {"self": {"href": "data/repositories/osrf/subt/issues/216/comments/54159879.json"}, "html": {"href": "#!/osrf/subt/issues/216#comment-54159879"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/subt/issues/216.json"}}, "type": "issue", "id": 216, "repository": {"links": {"self": {"href": "data/repositories/osrf/subt.json"}, "html": {"href": "#!/osrf/subt"}, "avatar": {"href": "data/bytebucket.org/ravatar/{3c95f6ad-c304-407c-b838-09597d836552}ts=2272898"}}, "type": "repository", "name": "subt", "full_name": "osrf/subt", "uuid": "{3c95f6ad-c304-407c-b838-09597d836552}"}, "title": "Cloudsim crash"}, "content": {"raw": "```\nignition::msgs::Pose pose;\npose.mutable_position()->set_x(x);\npose.mutable_position()->set_y(y);\npose.mutable_position()->set_z(z);\n\nsubt::msgs::Artifact subt_artifact;\nsubt_artifact.set_type(object_type);\nsubt_artifact.mutable_pose()->CopyFrom(pose);\n\nstd::string msg_string;\nif (!subt_artifact.SerializeToString(&msg_string)) {\n    std::cerr << \"ReportArtifact(): Error serializing message\\n\" << subt_artifact.DebugString() << std::endl;\n}\nG_comms_client->SendTo(msg_string, subt::kBaseStationName);\n```\n\nThe artifact reporting generally seems to work in other cases.  I receive points on valid submissions, duplicate submissions are noted and invalid submissions result in no points.", "markup": "markdown", "html": "<div class=\"codehilite\"><pre><span></span><span class=\"nt\">ignition</span><span class=\"p\">::</span><span class=\"nd\">msgs</span><span class=\"p\">::</span><span class=\"nd\">Pose</span> <span class=\"nt\">pose</span><span class=\"o\">;</span>\n<span class=\"nt\">pose</span><span class=\"p\">.</span><span class=\"nc\">mutable_position</span><span class=\"o\">()</span><span class=\"nt\">-</span><span class=\"o\">&gt;</span><span class=\"nt\">set_x</span><span class=\"o\">(</span><span class=\"nt\">x</span><span class=\"o\">);</span>\n<span class=\"nt\">pose</span><span class=\"p\">.</span><span class=\"nc\">mutable_position</span><span class=\"o\">()</span><span class=\"nt\">-</span><span class=\"o\">&gt;</span><span class=\"nt\">set_y</span><span class=\"o\">(</span><span class=\"nt\">y</span><span class=\"o\">);</span>\n<span class=\"nt\">pose</span><span class=\"p\">.</span><span class=\"nc\">mutable_position</span><span class=\"o\">()</span><span class=\"nt\">-</span><span class=\"o\">&gt;</span><span class=\"nt\">set_z</span><span class=\"o\">(</span><span class=\"nt\">z</span><span class=\"o\">);</span>\n\n<span class=\"nt\">subt</span><span class=\"p\">::</span><span class=\"nd\">msgs</span><span class=\"p\">::</span><span class=\"nd\">Artifact</span> <span class=\"nt\">subt_artifact</span><span class=\"o\">;</span>\n<span class=\"nt\">subt_artifact</span><span class=\"p\">.</span><span class=\"nc\">set_type</span><span class=\"o\">(</span><span class=\"nt\">object_type</span><span class=\"o\">);</span>\n<span class=\"nt\">subt_artifact</span><span class=\"p\">.</span><span class=\"nc\">mutable_pose</span><span class=\"o\">()</span><span class=\"nt\">-</span><span class=\"o\">&gt;</span><span class=\"nt\">CopyFrom</span><span class=\"o\">(</span><span class=\"nt\">pose</span><span class=\"o\">);</span>\n\n<span class=\"nt\">std</span><span class=\"p\">::</span><span class=\"nd\">string</span> <span class=\"nt\">msg_string</span><span class=\"o\">;</span>\n<span class=\"nt\">if</span> <span class=\"o\">(!</span><span class=\"nt\">subt_artifact</span><span class=\"p\">.</span><span class=\"nc\">SerializeToString</span><span class=\"o\">(&amp;</span><span class=\"nt\">msg_string</span><span class=\"o\">))</span> <span class=\"p\">{</span>\n    <span class=\"n\">std</span><span class=\"p\">:</span><span class=\"o\">:</span><span class=\"n\">cerr</span> <span class=\"o\">&lt;&lt;</span> <span class=\"s2\">&quot;ReportArtifact(): Error serializing message\\n&quot;</span> <span class=\"o\">&lt;&lt;</span> <span class=\"n\">subt_artifact</span><span class=\"o\">.</span><span class=\"nf\">DebugString</span><span class=\"p\">()</span> <span class=\"o\">&lt;&lt;</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">endl</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n<span class=\"nt\">G_comms_client-</span><span class=\"o\">&gt;</span><span class=\"nt\">SendTo</span><span class=\"o\">(</span><span class=\"nt\">msg_string</span><span class=\"o\">,</span> <span class=\"nt\">subt</span><span class=\"p\">::</span><span class=\"nd\">kBaseStationName</span><span class=\"o\">);</span>\n</pre></div>\n\n\n<p>The artifact reporting generally seems to work in other cases.  I receive points on valid submissions, duplicate submissions are noted and invalid submissions result in no points.</p>", "type": "rendered"}, "created_on": "2019-10-01T20:30:22.490339+00:00", "user": {"display_name": "GoRobotGo", "uuid": "{2fd8dac8-286d-461a-b7dd-dba99deea025}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2fd8dac8-286d-461a-b7dd-dba99deea025%7D"}, "html": {"href": "https://bitbucket.org/%7B2fd8dac8-286d-461a-b7dd-dba99deea025%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/6431739b101c18640b5a84d359fdd274d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsG-4.png"}}, "nickname": "GoRobotGo", "type": "user", "account_id": "557058:44b40072-c04b-41ae-ad09-376db9ebffa1"}, "updated_on": null, "type": "issue_comment", "id": 54159879}