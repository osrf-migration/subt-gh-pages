{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/subt.json"}, "html": {"href": "#!/osrf/subt"}, "avatar": {"href": "data/bytebucket.org/ravatar/{3c95f6ad-c304-407c-b838-09597d836552}ts=2272898"}}, "type": "repository", "name": "subt", "full_name": "osrf/subt", "uuid": "{3c95f6ad-c304-407c-b838-09597d836552}"}, "links": {"attachments": {"href": "data/repositories/osrf/subt/issues/371/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/subt/issues/371.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/subt/issues/371/watch"}, "comments": {"href": "data/repositories/osrf/subt/issues/371/comments_page=1.json"}, "html": {"href": "#!/osrf/subt/issues/371/camera-data-significantly-delayed-when"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/subt/issues/371/vote"}}, "reporter": {"display_name": "Malcolm Stagg", "uuid": "{eee13832-fdd5-4196-aa05-6cfdb1118c65}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beee13832-fdd5-4196-aa05-6cfdb1118c65%7D"}, "html": {"href": "https://bitbucket.org/%7Beee13832-fdd5-4196-aa05-6cfdb1118c65%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/8c08ab97dc600bddad36e4a58f8cc5afd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsMS-3.png"}}, "nickname": "malcolmst7", "type": "user", "account_id": "557058:08ef8b07-1500-4917-989c-89f91ce4beac"}, "title": "Camera data significantly delayed when using newest osrf/subt-virtual-testbed image", "component": null, "votes": 2, "watches": 6, "content": {"raw": "Using the current osrf/subt-virtual-testbed image, I\u2019m seeing large delays with an increasing backlog of data for the `front/image_raw` camera topic. This affects both the urban and cave worlds.\r\n\r\nExample repro steps:\r\n\r\n```\r\nign launch -v 4 urban_circuit.ign robotName1:=X1 robotConfig1:=X1_SENSOR_CONFIG_4\r\nroslaunch subt_example teleop.launch\r\nrviz\r\n```\r\n\r\n\\(Can also replace urban\\_circuit.ign with cave\\_circuit.ign, or use another robot base such as X2\\)\r\n\r\nLooking at the `/X1/front/image_raw` topic in rviz, initially it is fine, but after several seconds the data becomes increasingly delayed and no longer lines up with the current position of the robot.\r\n\r\nAlso, if I run my robot controller, I start to see error messages similar to the message below as it looks up a tf transform based on each image timestamp. This delay continues to increase, and the machine seems to run out of memory after a while:\r\n\r\n```\r\n[ERROR] [1585265942.360834143, 60.804000000]: Lookup would require extrapolation into the past.  Requested time 35.452000000 but the earliest data is at time 50.800000000, when looking up transform from frame [X2N1/base_link/camera_front] to frame [X2N1/map]\r\n```\r\n\r\nI\u2019m not sure exactly when this started, but can confirm the image from 12/20 was not affected.", "markup": "markdown", "html": "<p>Using the current osrf/subt-virtual-testbed image, I\u2019m seeing large delays with an increasing backlog of data for the <code>front/image_raw</code> camera topic. This affects both the urban and cave worlds.</p>\n<p>Example repro steps:</p>\n<div class=\"codehilite\"><pre><span></span>ign launch -v 4 urban_circuit.ign robotName1:=X1 robotConfig1:=X1_SENSOR_CONFIG_4\nroslaunch subt_example teleop.launch\nrviz\n</pre></div>\n\n\n<p>(Can also replace urban_circuit.ign with cave_circuit.ign, or use another robot base such as X2)</p>\n<p>Looking at the <code>/X1/front/image_raw</code> topic in rviz, initially it is fine, but after several seconds the data becomes increasingly delayed and no longer lines up with the current position of the robot.</p>\n<p>Also, if I run my robot controller, I start to see error messages similar to the message below as it looks up a tf transform based on each image timestamp. This delay continues to increase, and the machine seems to run out of memory after a while:</p>\n<div class=\"codehilite\"><pre><span></span>[ERROR] [1585265942.360834143, 60.804000000]: Lookup would require extrapolation into the past.  Requested time 35.452000000 but the earliest data is at time 50.800000000, when looking up transform from frame [X2N1/base_link/camera_front] to frame [X2N1/map]\n</pre></div>\n\n\n<p>I\u2019m not sure exactly when this started, but can confirm the image from 12/20 was not affected.</p>", "type": "rendered"}, "assignee": null, "state": "resolved", "version": null, "edited_on": null, "created_on": "2020-03-26T23:48:03.616602+00:00", "milestone": null, "updated_on": "2020-03-31T13:49:51.694718+00:00", "type": "issue", "id": 371}