{"priority": "blocker", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/subt.json"}, "html": {"href": "#!/osrf/subt"}, "avatar": {"href": "data/bytebucket.org/ravatar/{3c95f6ad-c304-407c-b838-09597d836552}ts=2272898"}}, "type": "repository", "name": "subt", "full_name": "osrf/subt", "uuid": "{3c95f6ad-c304-407c-b838-09597d836552}"}, "links": {"attachments": {"href": "data/repositories/osrf/subt/issues/204/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/subt/issues/204.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/subt/issues/204/watch"}, "comments": {"href": "data/repositories/osrf/subt/issues/204/comments_page=1.json"}, "html": {"href": "#!/osrf/subt/issues/204/incomplete-rosoutlog"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/subt/issues/204/vote"}}, "reporter": {"display_name": "Martin Dlouhy", "uuid": "{27de76db-249c-44be-9eb8-91a3b17bf0d7}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B27de76db-249c-44be-9eb8-91a3b17bf0d7%7D"}, "html": {"href": "https://bitbucket.org/%7B27de76db-249c-44be-9eb8-91a3b17bf0d7%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/85a9b1d43839b393296feb3b35a2e577d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsMD-1.png"}}, "nickname": "robotikacz", "type": "user", "account_id": "557058:490c665b-b69c-40f3-80ea-64f20747efc4"}, "title": "Incomplete rosout.log", "component": null, "votes": 0, "watches": 5, "content": {"raw": "\u201crosout.log\u201d is the only way how we can check our deployment on AWS \\(correct me, if I am wrong\\), and it is not complete! :disappointed: \r\n\r\nI run 3 simulations \\(robotika, \\[ver4, ver5, ver6\\], Simple Tunnel 02\\) last night and today. Just to be sure that everything is initialized \\(see 6 minutes issue #202\\) I added extra pure ROS code originally waiting for all necessary topics, which are later used in the main navigation program. They all first print \u201cbegin\u201d and at the end \u201cend\u201d to ROS info. The last simulation \\(ver6, cab6fd44-2448-4fa7-bd38-a44d94250182\\) even failed to pass \u201cWait for /X2/front/image\\_raw/compressed\u201d :frowning2: \r\n\r\nCode snippet:\r\n\r\n```python\r\ndef wait_for(topic, topic_type):\r\n    rospy.loginfo('Wait for ' + topic)\r\n    rospy.wait_for_message(topic, topic_type)\r\n    rospy.loginfo('Done with ' + topic)\r\n\r\n\r\ndef wait_for_sensors():\r\n    rospy.init_node('mdwait', anonymous=True)\r\n    wait_for_master()\r\n    rospy.loginfo('-------------- mdwait BEGIN --------------')\r\n    wait_for('/X2/imu/data', Imu)\r\n    wait_for('/X2/front_scan', LaserScan)\r\n    wait_for('/X2/front/image_raw/compressed', CompressedImage)\r\n    wait_for('/X2/odom', Odometry)\r\n    wait_for('/X2/battery_state', BatteryState)  # note, that this is maybe the critical component!\r\n    rospy.loginfo('--------------- mdwait END ---------------')\r\n```\r\n\r\nVer6 rosout.log\r\n\r\n\u200c\r\n\r\n```\r\n0.000000000  Node Startup\r\n0.000000000 INFO /tf_world_static [/tmp/binarydeb/ros-melodic-tf2-ros-0.6.5/src/static_transform_broadcaster_program.cpp:142(main)] [topics: /rosout, /tf_static] Spinning until killed publishing world to simple_tunnel_02\r\n0.000000000 INFO /subt_solution [/home/developer/subt_solution/src/subt_seed/src/subt_seed_node.cc:104(Controller)] [topics: /rosout] Waiting for /clock, /subt/start, and /subt/pose_from_artifact\r\n382.284000000 INFO /subt_solution [/home/developer/subt_solution/src/subt_seed/src/subt_seed_node.cc:112(Controller)] [topics: /rosout] Using robot name[X2]\r\n\r\n382.292000000 INFO /subt_solution [/home/developer/subt_solution/src/subt_seed/src/subt_seed_node.cc:147(Update)] [topics: /rosout] Sent start signal.\r\n382.324000000 INFO /subt_solution [/home/developer/subt_solution/src/subt_seed/src/subt_seed_node.cc:198(Update)] [topics: /rosout] MD robot pose -6 5 dist=61\r\n396.284000000 INFO /mdwait_71_1569502355368 [wait_for_sensors.py:24(wait_for)] [topics: /clock, /rosout] Wait for /X2/front/image_raw/compressed \r\n```\r\n\r\nVer5 \\(did not wait for the master published topics\\)\r\n\r\n\u200c\r\n\r\n```\r\n\r\n0.000000000  Node Startup\r\n0.000000000 INFO /tf_world_static [/tmp/binarydeb/ros-melodic-tf2-ros-0.6.5/src/static_transform_broadcaster_program.cpp:142(main)] [topics: /rosout, /tf_static] Spinning until killed publishing world to simple_tunnel_02\r\n0.000000000 INFO /subt_solution [/home/developer/subt_solution/src/subt_seed/src/subt_seed_node.cc:104(Controller)] [topics: /rosout] Waiting for /clock, /subt/start, and /subt/pose_from_artifact\r\n348.008000000 INFO /subt_solution [/home/developer/subt_solution/src/subt_seed/src/subt_seed_node.cc:112(Controller)] [topics: /rosout] Using robot name[X2]\r\n\r\n348.016000000 INFO /subt_solution [/home/developer/subt_solution/src/subt_seed/src/subt_seed_node.cc:147(Update)] [topics: /rosout] Sent start signal.\r\n348.052000000 INFO /subt_solution [/home/developer/subt_solution/src/subt_seed/src/subt_seed_node.cc:198(Update)] [topics: /rosout] MD robot pose -6 5 dist=61\r\n362.344000000 INFO /mdwait_71_1569495635370 [wait_for_sensors.py:10(wait_for)] [topics: /clock, /rosout] Wait for /X2/battery_state\r\n362.420000000 INFO /mdwait_71_1569495635370 [wait_for_sensors.py:12(wait_for)] [topics: /clock, /rosout] Done with /X2/battery_state\r\n362.424000000 INFO /mdwait_71_1569495635370 [wait_for_sensors.py:23(wait_for_sensors)] [topics: /clock, /rosout] --------------- mdwait END ---------------\r\n0.000000000 INFO /mdtalker_92_1569495636225 [std2ros.py:10(std2ros)] [topics: /clock, /rosout] -------------- BEGIN --------------\r\n363.908000000 INFO /X2/ros1_ign_bridge_twist [/tmp/ros1-ign-bridge-release/include/ros1_ign_bridge/factory.hpp:137(Factory<ROS1_T, IGN_T>::ros1_callback)] [topics: /rosout] Passing message from ROS1 geometry_msgs/Twist to Ignition ignition.msgs.Twist (showing msg only once per type  \r\n```\r\n\r\nSee END without BEGIN and missing previously reported topics \u2026", "markup": "markdown", "html": "<p>\u201crosout.log\u201d is the only way how we can check our deployment on AWS (correct me, if I am wrong), and it is not complete! <img class=\"emoji\" src=\"data/pf-emoji-service--cdn.us-east-1.prod.public.atl-paas.net/standard/551c9814-1d37-4573-819d-afab3afeaf32/48x48/1f61e.png\" alt=\"\ud83d\ude1e\" title=\":disappointed:\" data-emoji-short-name=\":disappointed:\" /> </p>\n<p>I run 3 simulations (robotika, [ver4, ver5, ver6], Simple Tunnel 02) last night and today. Just to be sure that everything is initialized (see 6 minutes issue <a href=\"#!/osrf/subt/issues/202/slow-aws-initialization\" rel=\"nofollow\" title=\"Slow AWS initialization?\" class=\"ap-connect-link\"><s>#202</s></a>) I added extra pure ROS code originally waiting for all necessary topics, which are later used in the main navigation program. They all first print \u201cbegin\u201d and at the end \u201cend\u201d to ROS info. The last simulation (ver6, <a href=\"#!/osrf/subt/commits/cab6fd44\" rel=\"nofollow\" class=\"ap-connect-link\">cab6fd44</a>-2448-4fa7-bd38-a44d94250182) even failed to pass \u201cWait for /X2/front/image_raw/compressed\u201d <img class=\"emoji\" src=\"data/pf-emoji-service--cdn.us-east-1.prod.public.atl-paas.net/standard/551c9814-1d37-4573-819d-afab3afeaf32/48x48/2639.png\" alt=\"\u2639\" title=\":frowning2:\" data-emoji-short-name=\":frowning2:\" /> </p>\n<p>Code snippet:</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"k\">def</span> <span class=\"nf\">wait_for</span><span class=\"p\">(</span><span class=\"n\">topic</span><span class=\"p\">,</span> <span class=\"n\">topic_type</span><span class=\"p\">):</span>\n    <span class=\"n\">rospy</span><span class=\"o\">.</span><span class=\"n\">loginfo</span><span class=\"p\">(</span><span class=\"s1\">&#39;Wait for &#39;</span> <span class=\"o\">+</span> <span class=\"n\">topic</span><span class=\"p\">)</span>\n    <span class=\"n\">rospy</span><span class=\"o\">.</span><span class=\"n\">wait_for_message</span><span class=\"p\">(</span><span class=\"n\">topic</span><span class=\"p\">,</span> <span class=\"n\">topic_type</span><span class=\"p\">)</span>\n    <span class=\"n\">rospy</span><span class=\"o\">.</span><span class=\"n\">loginfo</span><span class=\"p\">(</span><span class=\"s1\">&#39;Done with &#39;</span> <span class=\"o\">+</span> <span class=\"n\">topic</span><span class=\"p\">)</span>\n\n\n<span class=\"k\">def</span> <span class=\"nf\">wait_for_sensors</span><span class=\"p\">():</span>\n    <span class=\"n\">rospy</span><span class=\"o\">.</span><span class=\"n\">init_node</span><span class=\"p\">(</span><span class=\"s1\">&#39;mdwait&#39;</span><span class=\"p\">,</span> <span class=\"n\">anonymous</span><span class=\"o\">=</span><span class=\"bp\">True</span><span class=\"p\">)</span>\n    <span class=\"n\">wait_for_master</span><span class=\"p\">()</span>\n    <span class=\"n\">rospy</span><span class=\"o\">.</span><span class=\"n\">loginfo</span><span class=\"p\">(</span><span class=\"s1\">&#39;-------------- mdwait BEGIN --------------&#39;</span><span class=\"p\">)</span>\n    <span class=\"n\">wait_for</span><span class=\"p\">(</span><span class=\"s1\">&#39;/X2/imu/data&#39;</span><span class=\"p\">,</span> <span class=\"n\">Imu</span><span class=\"p\">)</span>\n    <span class=\"n\">wait_for</span><span class=\"p\">(</span><span class=\"s1\">&#39;/X2/front_scan&#39;</span><span class=\"p\">,</span> <span class=\"n\">LaserScan</span><span class=\"p\">)</span>\n    <span class=\"n\">wait_for</span><span class=\"p\">(</span><span class=\"s1\">&#39;/X2/front/image_raw/compressed&#39;</span><span class=\"p\">,</span> <span class=\"n\">CompressedImage</span><span class=\"p\">)</span>\n    <span class=\"n\">wait_for</span><span class=\"p\">(</span><span class=\"s1\">&#39;/X2/odom&#39;</span><span class=\"p\">,</span> <span class=\"n\">Odometry</span><span class=\"p\">)</span>\n    <span class=\"n\">wait_for</span><span class=\"p\">(</span><span class=\"s1\">&#39;/X2/battery_state&#39;</span><span class=\"p\">,</span> <span class=\"n\">BatteryState</span><span class=\"p\">)</span>  <span class=\"c1\"># note, that this is maybe the critical component!</span>\n    <span class=\"n\">rospy</span><span class=\"o\">.</span><span class=\"n\">loginfo</span><span class=\"p\">(</span><span class=\"s1\">&#39;--------------- mdwait END ---------------&#39;</span><span class=\"p\">)</span>\n</pre></div>\n\n\n<p>Ver6 rosout.log</p>\n<p>\u200c</p>\n<div class=\"codehilite\"><pre><span></span>0.000000000  Node Startup\n0.000000000 INFO /tf_world_static [/tmp/binarydeb/ros-melodic-tf2-ros-0.6.5/src/static_transform_broadcaster_program.cpp:142(main)] [topics: /rosout, /tf_static] Spinning until killed publishing world to simple_tunnel_02\n0.000000000 INFO /subt_solution [/home/developer/subt_solution/src/subt_seed/src/subt_seed_node.cc:104(Controller)] [topics: /rosout] Waiting for /clock, /subt/start, and /subt/pose_from_artifact\n382.284000000 INFO /subt_solution [/home/developer/subt_solution/src/subt_seed/src/subt_seed_node.cc:112(Controller)] [topics: /rosout] Using robot name[X2]\n\n382.292000000 INFO /subt_solution [/home/developer/subt_solution/src/subt_seed/src/subt_seed_node.cc:147(Update)] [topics: /rosout] Sent start signal.\n382.324000000 INFO /subt_solution [/home/developer/subt_solution/src/subt_seed/src/subt_seed_node.cc:198(Update)] [topics: /rosout] MD robot pose -6 5 dist=61\n396.284000000 INFO /mdwait_71_1569502355368 [wait_for_sensors.py:24(wait_for)] [topics: /clock, /rosout] Wait for /X2/front/image_raw/compressed \n</pre></div>\n\n\n<p>Ver5 (did not wait for the master published topics)</p>\n<p>\u200c</p>\n<div class=\"codehilite\"><pre><span></span>0.000000000  Node Startup\n0.000000000 INFO /tf_world_static [/tmp/binarydeb/ros-melodic-tf2-ros-0.6.5/src/static_transform_broadcaster_program.cpp:142(main)] [topics: /rosout, /tf_static] Spinning until killed publishing world to simple_tunnel_02\n0.000000000 INFO /subt_solution [/home/developer/subt_solution/src/subt_seed/src/subt_seed_node.cc:104(Controller)] [topics: /rosout] Waiting for /clock, /subt/start, and /subt/pose_from_artifact\n348.008000000 INFO /subt_solution [/home/developer/subt_solution/src/subt_seed/src/subt_seed_node.cc:112(Controller)] [topics: /rosout] Using robot name[X2]\n\n348.016000000 INFO /subt_solution [/home/developer/subt_solution/src/subt_seed/src/subt_seed_node.cc:147(Update)] [topics: /rosout] Sent start signal.\n348.052000000 INFO /subt_solution [/home/developer/subt_solution/src/subt_seed/src/subt_seed_node.cc:198(Update)] [topics: /rosout] MD robot pose -6 5 dist=61\n362.344000000 INFO /mdwait_71_1569495635370 [wait_for_sensors.py:10(wait_for)] [topics: /clock, /rosout] Wait for /X2/battery_state\n362.420000000 INFO /mdwait_71_1569495635370 [wait_for_sensors.py:12(wait_for)] [topics: /clock, /rosout] Done with /X2/battery_state\n362.424000000 INFO /mdwait_71_1569495635370 [wait_for_sensors.py:23(wait_for_sensors)] [topics: /clock, /rosout] --------------- mdwait END ---------------\n0.000000000 INFO /mdtalker_92_1569495636225 [std2ros.py:10(std2ros)] [topics: /clock, /rosout] -------------- BEGIN --------------\n363.908000000 INFO /X2/ros1_ign_bridge_twist [/tmp/ros1-ign-bridge-release/include/ros1_ign_bridge/factory.hpp:137(Factory&lt;ROS1_T, IGN_T&gt;::ros1_callback)] [topics: /rosout] Passing message from ROS1 geometry_msgs/Twist to Ignition ignition.msgs.Twist (showing msg only once per type  \n</pre></div>\n\n\n<p>See END without BEGIN and missing previously reported topics \u2026</p>", "type": "rendered"}, "assignee": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "state": "closed", "version": null, "edited_on": null, "created_on": "2019-09-26T14:22:17.334480+00:00", "milestone": null, "updated_on": "2019-10-07T13:34:31.044974+00:00", "type": "issue", "id": 204}