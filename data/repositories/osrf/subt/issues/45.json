{"priority": "minor", "kind": "enhancement", "repository": {"links": {"self": {"href": "data/repositories/osrf/subt.json"}, "html": {"href": "#!/osrf/subt"}, "avatar": {"href": "data/bytebucket.org/ravatar/{3c95f6ad-c304-407c-b838-09597d836552}ts=2272898"}}, "type": "repository", "name": "subt", "full_name": "osrf/subt", "uuid": "{3c95f6ad-c304-407c-b838-09597d836552}"}, "links": {"attachments": {"href": "data/repositories/osrf/subt/issues/45/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/subt/issues/45.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/subt/issues/45/watch"}, "comments": {"href": "data/repositories/osrf/subt/issues/45/comments_page=1.json"}, "html": {"href": "#!/osrf/subt/issues/45/gimbal-not-working"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/subt/issues/45/vote"}}, "reporter": {"display_name": "dinesh lama", "uuid": "{39eb828d-6a38-432c-bf2c-d706ae33387c}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B39eb828d-6a38-432c-bf2c-d706ae33387c%7D"}, "html": {"href": "https://bitbucket.org/%7B39eb828d-6a38-432c-bf2c-d706ae33387c%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/7ee05df866c388cda4122d3515365687d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsDL-0.png"}}, "nickname": "roboticsai", "type": "user", "account_id": "5bc7250069e59242db0326f4"}, "title": "gimbal not working", "component": null, "votes": 0, "watches": 7, "content": {"raw": "I tried to add gimbal mechanism in X4 robot by modifying some x4 robot xacro but i'm always getting msg\" Controller Spawner couldn't find the expected controller_manager ROS interface.\"\r\n  \r\nIn x4_with_sensors.xacro file i added transmission element and gazebo_ros_control plugin as:\r\n\r\n```\r\n#!c++\r\n\r\n  <xacro:if value=\"$(optenv X4_SENSOR_CONFIG_4 0)\">\r\n    <xacro:camera_macro\r\n      namespace=\"${namespace}\"\r\n      parent_link=\"${namespace}/base_link\"\r\n      camera_suffix=\"front\"\r\n      frame_rate=\"20\"\r\n      horizontal_fov=\"2\"\r\n      image_width=\"1280\"\r\n      image_height=\"960\"\r\n      image_format=\"R8G8B8\"\r\n      min_distance=\"0.02\"\r\n      max_distance=\"100\"\r\n      noise_mean=\"0.0\"\r\n      noise_stddev=\"0.007\"\r\n      enable_visual=\"true\">\r\n      <box size=\"0.02 0.05 0.05\" />\r\n      <origin xyz=\"0.1 0 0\" rpy=\"0 0 0\" />\r\n    </xacro:camera_macro>\r\n\r\n    <planar_lidar \r\n      name=\"${namespace}/laser\"\r\n      topic=\"${namespace}/scan\"\r\n      mesh=\"package://subt_sensors/meshes/sick-lms1xx.dae\"\r\n      min_angle=\"-2.3562\"\r\n      max_angle=\"2.3562\"\r\n      min_range=\"0.5\"\r\n      max_range=\"20\"\r\n      update_rate=\"20\"\r\n    />\r\n  \r\n    <joint name=\"front_laser_mount_joint\" type=\"continuous\">\r\n      <origin xyz=\"0 0 -0.05\" rpy=\"0 0 0\" />\r\n      <parent link=\"${namespace}/base_link\" />\r\n      <child link=\"${namespace}/laser\" />\r\n      <dynamics damping=\"0.7\"/>\r\n    </joint>\r\n  </xacro:if>\r\n  \r\n  <transmission name=\"tran1\">\r\n    <type>transmission_interface/SimpleTransmission</type>\r\n    <joint name=\"front_laser_mount_joint\">\r\n      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>\r\n    </joint>\r\n    <actuator name=\"motor1\">\r\n      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>\r\n      <mechanicalReduction>1</mechanicalReduction>\r\n    </actuator>\r\n  </transmission>\r\n  \r\n  <gazebo>\r\n    <plugin name=\"gazebo_ros_control\" filename=\"libgazebo_ros_control.so\">\r\n      <robotSimType>gazebo_ros_control/DefaultRobotHWSim</robotSimType>\r\n    </plugin>\r\n  </gazebo>\r\n```\r\nthan i loaded configuration for this joint from a file like:\r\n\r\n```\r\n#!c++\r\n\r\nx4_with_sensors:\r\n  # Publish all joint states -----------------------------------\r\n  joint_state_controller:\r\n    type: joint_state_controller/JointStateController\r\n    publish_rate: 50  \r\n  \r\n  # Position Controllers ---------------------------------------\r\n  joint1_position_controller:\r\n    type: effort_controllers/JointPositionController\r\n    joint: front_laser_mount_joint\r\n    pid: {p: 100.0, i: 0.01, d: 10.0}\r\n```\r\nthan i loaded it from a launch file with lines:\r\n\r\n```\r\n#!c++\r\n\r\n  <node name=\"controller_spawner\" pkg=\"controller_manager\" type=\"spawner\" respawn=\"false\"\r\n\toutput=\"screen\" args=\"joint_state_controller\r\n\t\t\t\t\t  joint1_position_controller\"/>  \r\n```\r\n\r\nCan anyone show me how they did it?", "markup": "markdown", "html": "<p>I tried to add gimbal mechanism in X4 robot by modifying some x4 robot xacro but i'm always getting msg\" Controller Spawner couldn't find the expected controller_manager ROS interface.\"</p>\n<p>In x4_with_sensors.xacro file i added transmission element and gazebo_ros_control plugin as:</p>\n<div class=\"codehilite language-c++\"><pre><span></span>  <span class=\"o\">&lt;</span><span class=\"nl\">xacro</span><span class=\"p\">:</span><span class=\"k\">if</span> <span class=\"n\">value</span><span class=\"o\">=</span><span class=\"s\">&quot;$(optenv X4_SENSOR_CONFIG_4 0)&quot;</span><span class=\"o\">&gt;</span>\n    <span class=\"o\">&lt;</span><span class=\"nl\">xacro</span><span class=\"p\">:</span><span class=\"n\">camera_macro</span>\n      <span class=\"k\">namespace</span><span class=\"o\">=</span><span class=\"s\">&quot;${namespace}&quot;</span>\n      <span class=\"n\">parent_link</span><span class=\"o\">=</span><span class=\"s\">&quot;${namespace}/base_link&quot;</span>\n      <span class=\"n\">camera_suffix</span><span class=\"o\">=</span><span class=\"s\">&quot;front&quot;</span>\n      <span class=\"n\">frame_rate</span><span class=\"o\">=</span><span class=\"s\">&quot;20&quot;</span>\n      <span class=\"n\">horizontal_fov</span><span class=\"o\">=</span><span class=\"s\">&quot;2&quot;</span>\n      <span class=\"n\">image_width</span><span class=\"o\">=</span><span class=\"s\">&quot;1280&quot;</span>\n      <span class=\"n\">image_height</span><span class=\"o\">=</span><span class=\"s\">&quot;960&quot;</span>\n      <span class=\"n\">image_format</span><span class=\"o\">=</span><span class=\"s\">&quot;R8G8B8&quot;</span>\n      <span class=\"n\">min_distance</span><span class=\"o\">=</span><span class=\"s\">&quot;0.02&quot;</span>\n      <span class=\"n\">max_distance</span><span class=\"o\">=</span><span class=\"s\">&quot;100&quot;</span>\n      <span class=\"n\">noise_mean</span><span class=\"o\">=</span><span class=\"s\">&quot;0.0&quot;</span>\n      <span class=\"n\">noise_stddev</span><span class=\"o\">=</span><span class=\"s\">&quot;0.007&quot;</span>\n      <span class=\"n\">enable_visual</span><span class=\"o\">=</span><span class=\"s\">&quot;true&quot;</span><span class=\"o\">&gt;</span>\n      <span class=\"o\">&lt;</span><span class=\"n\">box</span> <span class=\"n\">size</span><span class=\"o\">=</span><span class=\"s\">&quot;0.02 0.05 0.05&quot;</span> <span class=\"o\">/&gt;</span>\n      <span class=\"o\">&lt;</span><span class=\"n\">origin</span> <span class=\"n\">xyz</span><span class=\"o\">=</span><span class=\"s\">&quot;0.1 0 0&quot;</span> <span class=\"n\">rpy</span><span class=\"o\">=</span><span class=\"s\">&quot;0 0 0&quot;</span> <span class=\"o\">/&gt;</span>\n    <span class=\"o\">&lt;/</span><span class=\"nl\">xacro</span><span class=\"p\">:</span><span class=\"n\">camera_macro</span><span class=\"o\">&gt;</span>\n\n    <span class=\"o\">&lt;</span><span class=\"n\">planar_lidar</span> \n      <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s\">&quot;${namespace}/laser&quot;</span>\n      <span class=\"n\">topic</span><span class=\"o\">=</span><span class=\"s\">&quot;${namespace}/scan&quot;</span>\n      <span class=\"n\">mesh</span><span class=\"o\">=</span><span class=\"s\">&quot;package://subt_sensors/meshes/sick-lms1xx.dae&quot;</span>\n      <span class=\"n\">min_angle</span><span class=\"o\">=</span><span class=\"s\">&quot;-2.3562&quot;</span>\n      <span class=\"n\">max_angle</span><span class=\"o\">=</span><span class=\"s\">&quot;2.3562&quot;</span>\n      <span class=\"n\">min_range</span><span class=\"o\">=</span><span class=\"s\">&quot;0.5&quot;</span>\n      <span class=\"n\">max_range</span><span class=\"o\">=</span><span class=\"s\">&quot;20&quot;</span>\n      <span class=\"n\">update_rate</span><span class=\"o\">=</span><span class=\"s\">&quot;20&quot;</span>\n    <span class=\"o\">/&gt;</span>\n\n    <span class=\"o\">&lt;</span><span class=\"n\">joint</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s\">&quot;front_laser_mount_joint&quot;</span> <span class=\"n\">type</span><span class=\"o\">=</span><span class=\"s\">&quot;continuous&quot;</span><span class=\"o\">&gt;</span>\n      <span class=\"o\">&lt;</span><span class=\"n\">origin</span> <span class=\"n\">xyz</span><span class=\"o\">=</span><span class=\"s\">&quot;0 0 -0.05&quot;</span> <span class=\"n\">rpy</span><span class=\"o\">=</span><span class=\"s\">&quot;0 0 0&quot;</span> <span class=\"o\">/&gt;</span>\n      <span class=\"o\">&lt;</span><span class=\"n\">parent</span> <span class=\"n\">link</span><span class=\"o\">=</span><span class=\"s\">&quot;${namespace}/base_link&quot;</span> <span class=\"o\">/&gt;</span>\n      <span class=\"o\">&lt;</span><span class=\"n\">child</span> <span class=\"n\">link</span><span class=\"o\">=</span><span class=\"s\">&quot;${namespace}/laser&quot;</span> <span class=\"o\">/&gt;</span>\n      <span class=\"o\">&lt;</span><span class=\"n\">dynamics</span> <span class=\"n\">damping</span><span class=\"o\">=</span><span class=\"s\">&quot;0.7&quot;</span><span class=\"o\">/&gt;</span>\n    <span class=\"o\">&lt;/</span><span class=\"n\">joint</span><span class=\"o\">&gt;</span>\n  <span class=\"o\">&lt;/</span><span class=\"nl\">xacro</span><span class=\"p\">:</span><span class=\"k\">if</span><span class=\"o\">&gt;</span>\n\n  <span class=\"o\">&lt;</span><span class=\"n\">transmission</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s\">&quot;tran1&quot;</span><span class=\"o\">&gt;</span>\n    <span class=\"o\">&lt;</span><span class=\"n\">type</span><span class=\"o\">&gt;</span><span class=\"n\">transmission_interface</span><span class=\"o\">/</span><span class=\"n\">SimpleTransmission</span><span class=\"o\">&lt;/</span><span class=\"n\">type</span><span class=\"o\">&gt;</span>\n    <span class=\"o\">&lt;</span><span class=\"n\">joint</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s\">&quot;front_laser_mount_joint&quot;</span><span class=\"o\">&gt;</span>\n      <span class=\"o\">&lt;</span><span class=\"n\">hardwareInterface</span><span class=\"o\">&gt;</span><span class=\"n\">hardware_interface</span><span class=\"o\">/</span><span class=\"n\">EffortJointInterface</span><span class=\"o\">&lt;/</span><span class=\"n\">hardwareInterface</span><span class=\"o\">&gt;</span>\n    <span class=\"o\">&lt;/</span><span class=\"n\">joint</span><span class=\"o\">&gt;</span>\n    <span class=\"o\">&lt;</span><span class=\"n\">actuator</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s\">&quot;motor1&quot;</span><span class=\"o\">&gt;</span>\n      <span class=\"o\">&lt;</span><span class=\"n\">hardwareInterface</span><span class=\"o\">&gt;</span><span class=\"n\">hardware_interface</span><span class=\"o\">/</span><span class=\"n\">EffortJointInterface</span><span class=\"o\">&lt;/</span><span class=\"n\">hardwareInterface</span><span class=\"o\">&gt;</span>\n      <span class=\"o\">&lt;</span><span class=\"n\">mechanicalReduction</span><span class=\"o\">&gt;</span><span class=\"mi\">1</span><span class=\"o\">&lt;/</span><span class=\"n\">mechanicalReduction</span><span class=\"o\">&gt;</span>\n    <span class=\"o\">&lt;/</span><span class=\"n\">actuator</span><span class=\"o\">&gt;</span>\n  <span class=\"o\">&lt;/</span><span class=\"n\">transmission</span><span class=\"o\">&gt;</span>\n\n  <span class=\"o\">&lt;</span><span class=\"n\">gazebo</span><span class=\"o\">&gt;</span>\n    <span class=\"o\">&lt;</span><span class=\"n\">plugin</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s\">&quot;gazebo_ros_control&quot;</span> <span class=\"n\">filename</span><span class=\"o\">=</span><span class=\"s\">&quot;libgazebo_ros_control.so&quot;</span><span class=\"o\">&gt;</span>\n      <span class=\"o\">&lt;</span><span class=\"n\">robotSimType</span><span class=\"o\">&gt;</span><span class=\"n\">gazebo_ros_control</span><span class=\"o\">/</span><span class=\"n\">DefaultRobotHWSim</span><span class=\"o\">&lt;/</span><span class=\"n\">robotSimType</span><span class=\"o\">&gt;</span>\n    <span class=\"o\">&lt;/</span><span class=\"n\">plugin</span><span class=\"o\">&gt;</span>\n  <span class=\"o\">&lt;/</span><span class=\"n\">gazebo</span><span class=\"o\">&gt;</span>\n</pre></div>\n\n\n<p>than i loaded configuration for this joint from a file like:</p>\n<div class=\"codehilite language-c++\"><pre><span></span><span class=\"nl\">x4_with_sensors</span><span class=\"p\">:</span>\n  <span class=\"cp\"># Publish all joint states -----------------------------------</span>\n  <span class=\"nl\">joint_state_controller</span><span class=\"p\">:</span>\n    <span class=\"nl\">type</span><span class=\"p\">:</span> <span class=\"n\">joint_state_controller</span><span class=\"o\">/</span><span class=\"n\">JointStateController</span>\n    <span class=\"nl\">publish_rate</span><span class=\"p\">:</span> <span class=\"mi\">50</span>  \n\n  <span class=\"err\">#</span> <span class=\"n\">Position</span> <span class=\"n\">Controllers</span> <span class=\"o\">---------------------------------------</span>\n  <span class=\"nl\">joint1_position_controller</span><span class=\"p\">:</span>\n    <span class=\"nl\">type</span><span class=\"p\">:</span> <span class=\"n\">effort_controllers</span><span class=\"o\">/</span><span class=\"n\">JointPositionController</span>\n    <span class=\"nl\">joint</span><span class=\"p\">:</span> <span class=\"n\">front_laser_mount_joint</span>\n    <span class=\"nl\">pid</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"nl\">p</span><span class=\"p\">:</span> <span class=\"mf\">100.0</span><span class=\"p\">,</span> <span class=\"nl\">i</span><span class=\"p\">:</span> <span class=\"mf\">0.01</span><span class=\"p\">,</span> <span class=\"nl\">d</span><span class=\"p\">:</span> <span class=\"mf\">10.0</span><span class=\"p\">}</span>\n</pre></div>\n\n\n<p>than i loaded it from a launch file with lines:</p>\n<div class=\"codehilite language-c++\"><pre><span></span>  <span class=\"o\">&lt;</span><span class=\"n\">node</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s\">&quot;controller_spawner&quot;</span> <span class=\"n\">pkg</span><span class=\"o\">=</span><span class=\"s\">&quot;controller_manager&quot;</span> <span class=\"n\">type</span><span class=\"o\">=</span><span class=\"s\">&quot;spawner&quot;</span> <span class=\"n\">respawn</span><span class=\"o\">=</span><span class=\"s\">&quot;false&quot;</span>\n    <span class=\"n\">output</span><span class=\"o\">=</span><span class=\"s\">&quot;screen&quot;</span> <span class=\"n\">args</span><span class=\"o\">=</span><span class=\"s\">&quot;joint_state_controller</span>\n                      <span class=\"n\">joint1_position_controller</span><span class=\"s\">&quot;/&gt;  </span>\n</pre></div>\n\n\n<p>Can anyone show me how they did it?</p>", "type": "rendered"}, "assignee": null, "state": "duplicate", "version": null, "edited_on": null, "created_on": "2019-01-04T09:20:25.208643+00:00", "milestone": null, "updated_on": "2020-03-25T18:50:47.863912+00:00", "type": "issue", "id": 45}