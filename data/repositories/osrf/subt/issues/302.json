{"priority": "minor", "kind": "enhancement", "repository": {"links": {"self": {"href": "data/repositories/osrf/subt.json"}, "html": {"href": "#!/osrf/subt"}, "avatar": {"href": "data/bytebucket.org/ravatar/{3c95f6ad-c304-407c-b838-09597d836552}ts=2272898"}}, "type": "repository", "name": "subt", "full_name": "osrf/subt", "uuid": "{3c95f6ad-c304-407c-b838-09597d836552}"}, "links": {"attachments": {"href": "data/repositories/osrf/subt/issues/302/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/subt/issues/302.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/subt/issues/302/watch"}, "comments": {"href": "data/repositories/osrf/subt/issues/302/comments_page=1.json"}, "html": {"href": "#!/osrf/subt/issues/302/problem-with-3d-lidar-in-headless-mode-in"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/subt/issues/302/vote"}}, "reporter": {"display_name": "Sophisticated Engineering", "uuid": "{12ed2357-e253-4c67-a2b9-7e12c64773e4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B12ed2357-e253-4c67-a2b9-7e12c64773e4%7D"}, "html": {"href": "https://bitbucket.org/%7B12ed2357-e253-4c67-a2b9-7e12c64773e4%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/2a19963da6b0f34b3be28d8690bdd711d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSE-6.png"}}, "nickname": "sopheng", "type": "user", "account_id": "5c0d82b3128c7106f57691a7"}, "title": "Problem with 3D-Lidar in Headless mode in VirtualBox", "component": null, "votes": 0, "watches": 3, "content": {"raw": "I found a way to do some tests on a Notebook without a NVIDIA- / Cuda-Graphics card by using the Headless mode in a VirtualBox virtual machine. Unfortunately not all configurations work. It seems that Configurations with 3D-Lidar are not working.   \r\nUsing the configuration X2\\_SENSOR\\_CONFIG\\_6 with command \r\n\r\n`ign launch -v 4 urban_circuit.ign worldName:=simple_urban_01 headless:=true robotName1:=X2n1 robotConfig1:=X2_SENSOR_CONFIG_6`\r\n\r\n\\(using a catkin-workspace installation\\) results in the abort:\r\n\r\n\u200c\r\n\r\n```\r\n[Msg] Loaded level [48]\r\n[Msg] Loaded level [49]\r\n[Msg] Publishing laser scans on [world/simple_urban_01/model/X2n1/link/base_link/sensor/front_laser/scan]\r\nterminate called after throwing an instance of 'Ogre::RenderingAPIException'\r\n  what():  OGRE EXCEPTION(3:RenderingAPIException): Zero sized texture surface on texture X2n1::base_link::front_laser_samplerTex face 0 mipmap 0. The GL driver probably refused to create the texture. in GL3PlusTexture::_createSurfaceList at /var/lib/jenkins/workspace/ogre-2.1-debbuilder/repo/RenderSystems/GL3Plus/src/OgreGL3PlusTexture.cpp (line 516)\r\nStack trace (most recent call last) in thread 4697:\r\n#24   Object \"\", at 0xffffffffffffffff, in \r\n#23   Source \"/build/glibc-OTsEL5/glibc-2.27/misc/../sysdeps/unix/sysv/linux/x86_64/clone.S\", line 95, in  [0x7fb58ed3b88e]\r\n#22   Source \"/build/glibc-OTsEL5/glibc-2.27/nptl/pthread_create.c\", line 463, in start_thread [0x7fb58ea026da]\r\n#21   Object \"/usr/lib/x86_64-linux-gnu/libstdc++.so.6\", at 0x7fb58b2d366e, in std::error_code::default_error_condition() const\r\n#20   Object \"/usr/lib/x86_64-linux-gnu/ign-gazebo-2/plugins/libignition-gazebo-sensors-system.so\", at 0x7fb55a57f46f, in ignition::gazebo::v2::systems::SensorsPrivate::RenderThread()\r\n#19   Object \"/usr/lib/x86_64-linux-gnu/ign-gazebo-2/plugins/libignition-gazebo-sensors-system.so\", at 0x7fb55a57f2c4, in ignition::gazebo::v2::systems::SensorsPrivate::RunOnce()\r\n#18   Object \"/usr/lib/x86_64-linux-gnu/libignition-rendering2.so.2\", at 0x7fb56b170b1b, in ignition::rendering::v2::BaseScene::PreRender()\r\n#17   Object \"/usr/lib/x86_64-linux-gnu/libignition-rendering2-ogre2.so\", at 0x7fb54296cf65, in ignition::rendering::v2::BaseVisual<ignition::rendering::v2::Ogre2Node>::PreRender()\r\n#16   Object \"/usr/lib/x86_64-linux-gnu/libignition-rendering2-ogre2.so\", at 0x7fb54296e931, in ignition::rendering::v2::BaseVisual<ignition::rendering::v2::Ogre2Node>::PreRenderChildren()\r\n#15   Object \"/usr/lib/x86_64-linux-gnu/libignition-rendering2-ogre2.so\", at 0x7fb54296cf65, in ignition::rendering::v2::BaseVisual<ignition::rendering::v2::Ogre2Node>::PreRender()\r\n#14   Object \"/usr/lib/x86_64-linux-gnu/libignition-rendering2-ogre2.so\", at 0x7fb54296e931, in ignition::rendering::v2::BaseVisual<ignition::rendering::v2::Ogre2Node>::PreRenderChildren()\r\n#13   Object \"/usr/lib/x86_64-linux-gnu/libignition-rendering2-ogre2.so\", at 0x7fb54296cf65, in ignition::rendering::v2::BaseVisual<ignition::rendering::v2::Ogre2Node>::PreRender()\r\n#12   Object \"/usr/lib/x86_64-linux-gnu/libignition-rendering2-ogre2.so\", at 0x7fb54296e931, in ignition::rendering::v2::BaseVisual<ignition::rendering::v2::Ogre2Node>::PreRenderChildren()\r\n#11   Object \"/usr/lib/x86_64-linux-gnu/libignition-rendering2-ogre2.so\", at 0x7fb54297d560, in ignition::rendering::v2::Ogre2GpuRays::CreateGpuRaysTextures()\r\n#10   Object \"/usr/lib/x86_64-linux-gnu/libignition-rendering2-ogre2.so\", at 0x7fb54297cc66, in ignition::rendering::v2::Ogre2GpuRays::CreateSampleTexture()\r\n#9    Object \"/usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\", at 0x7fb54221aa64, in Ogre::TextureManager::createManual(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, Ogre::TextureType, unsigned int, unsigned int, unsigned int, int, Ogre::PixelFormat, int, Ogre::ManualResourceLoader*, bool, unsigned int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool, bool)\r\n#8    Object \"/usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\", at 0x7fb54221654c, in Ogre::Texture::createInternalResources()\r\n#7    Object \"/usr/lib/x86_64-linux-gnu/OGRE-2.1/OGRE/RenderSystem_GL3Plus.so\", at 0x7fb5281724b7, in Ogre::GL3PlusTexture::createInternalResourcesImpl()\r\n#6    Object \"/usr/lib/x86_64-linux-gnu/OGRE-2.1/OGRE/RenderSystem_GL3Plus.so\", at 0x7fb528171eed, in Ogre::GL3PlusTexture::_createSurfaceList()\r\n#5    Object \"/usr/lib/x86_64-linux-gnu/libstdc++.so.6\", at 0x7fb58b2a8d23, in __cxa_throw\r\n#4    Object \"/usr/lib/x86_64-linux-gnu/libstdc++.so.6\", at 0x7fb58b2a8af0, in std::terminate()\r\n#3    Object \"/usr/lib/x86_64-linux-gnu/libstdc++.so.6\", at 0x7fb58b2a8ab5, in std::rethrow_exception(std::__exception_ptr::exception_ptr)\r\n#2    Object \"/usr/lib/x86_64-linux-gnu/libstdc++.so.6\", at 0x7fb58b2a2956, in \r\n#1    Source \"/build/glibc-OTsEL5/glibc-2.27/stdlib/abort.c\", line 79, in __GI_abort [0x7fb58ec5a800]\r\n#0    Source \"/build/glibc-OTsEL5/glibc-2.27/signal/../sysdeps/unix/sysv/linux/raise.c\", line 51, in __GI_raise [0x7fb58ec58e97]\r\nAborted (Signal sent by tkill() 4599 1000)\r\nAborted (core dumped)\r\n```\r\n\r\nUsing the config X2\\_SENSOR\\_CONFIG\\_4 or X2\\_SENSOR\\_CONFIG\\_5 is running. And one can also see movement in rviz. \r\n\r\nDoes anybody has an idea how the problem with X2\\_SENSOR\\_CONFIG\\_6 can be fixed?\r\n\r\n\u200c", "markup": "markdown", "html": "<p>I found a way to do some tests on a Notebook without a NVIDIA- / Cuda-Graphics card by using the Headless mode in a VirtualBox virtual machine. Unfortunately not all configurations work. It seems that Configurations with 3D-Lidar are not working. <br />\nUsing the configuration X2_SENSOR_CONFIG_6 with command </p>\n<p><code>ign launch -v 4 urban_circuit.ign worldName:=simple_urban_01 headless:=true robotName1:=X2n1 robotConfig1:=X2_SENSOR_CONFIG_6</code></p>\n<p>(using a catkin-workspace installation) results in the abort:</p>\n<p>\u200c</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"k\">[Msg] Loaded level [48]</span>\n<span class=\"k\">[Msg] Loaded level [49]</span>\n<span class=\"k\">[Msg] Publishing laser scans on [world/simple_urban_01/model/X2n1/link/base_link/sensor/front_laser/scan]</span>\n<span class=\"na\">terminate called after throwing an instance of &#39;Ogre::RenderingAPIException&#39;</span>\n  <span class=\"na\">what():  OGRE EXCEPTION(3:RenderingAPIException): Zero sized texture surface on texture X2n1::base_link::front_laser_samplerTex face 0 mipmap 0. The GL driver probably refused to create the texture. in GL3PlusTexture::_createSurfaceList at /var/lib/jenkins/workspace/ogre-2.1-debbuilder/repo/RenderSystems/GL3Plus/src/OgreGL3PlusTexture.cpp (line 516)</span>\n<span class=\"na\">Stack trace (most recent call last) in thread 4697:</span>\n<span class=\"c1\">#24   Object &quot;&quot;, at 0xffffffffffffffff, in </span>\n<span class=\"c1\">#23   Source &quot;/build/glibc-OTsEL5/glibc-2.27/misc/../sysdeps/unix/sysv/linux/x86_64/clone.S&quot;, line 95, in  [0x7fb58ed3b88e]</span>\n<span class=\"c1\">#22   Source &quot;/build/glibc-OTsEL5/glibc-2.27/nptl/pthread_create.c&quot;, line 463, in start_thread [0x7fb58ea026da]</span>\n<span class=\"c1\">#21   Object &quot;/usr/lib/x86_64-linux-gnu/libstdc++.so.6&quot;, at 0x7fb58b2d366e, in std::error_code::default_error_condition() const</span>\n<span class=\"c1\">#20   Object &quot;/usr/lib/x86_64-linux-gnu/ign-gazebo-2/plugins/libignition-gazebo-sensors-system.so&quot;, at 0x7fb55a57f46f, in ignition::gazebo::v2::systems::SensorsPrivate::RenderThread()</span>\n<span class=\"c1\">#19   Object &quot;/usr/lib/x86_64-linux-gnu/ign-gazebo-2/plugins/libignition-gazebo-sensors-system.so&quot;, at 0x7fb55a57f2c4, in ignition::gazebo::v2::systems::SensorsPrivate::RunOnce()</span>\n<span class=\"c1\">#18   Object &quot;/usr/lib/x86_64-linux-gnu/libignition-rendering2.so.2&quot;, at 0x7fb56b170b1b, in ignition::rendering::v2::BaseScene::PreRender()</span>\n<span class=\"c1\">#17   Object &quot;/usr/lib/x86_64-linux-gnu/libignition-rendering2-ogre2.so&quot;, at 0x7fb54296cf65, in ignition::rendering::v2::BaseVisual&lt;ignition::rendering::v2::Ogre2Node&gt;::PreRender()</span>\n<span class=\"c1\">#16   Object &quot;/usr/lib/x86_64-linux-gnu/libignition-rendering2-ogre2.so&quot;, at 0x7fb54296e931, in ignition::rendering::v2::BaseVisual&lt;ignition::rendering::v2::Ogre2Node&gt;::PreRenderChildren()</span>\n<span class=\"c1\">#15   Object &quot;/usr/lib/x86_64-linux-gnu/libignition-rendering2-ogre2.so&quot;, at 0x7fb54296cf65, in ignition::rendering::v2::BaseVisual&lt;ignition::rendering::v2::Ogre2Node&gt;::PreRender()</span>\n<span class=\"c1\">#14   Object &quot;/usr/lib/x86_64-linux-gnu/libignition-rendering2-ogre2.so&quot;, at 0x7fb54296e931, in ignition::rendering::v2::BaseVisual&lt;ignition::rendering::v2::Ogre2Node&gt;::PreRenderChildren()</span>\n<span class=\"c1\">#13   Object &quot;/usr/lib/x86_64-linux-gnu/libignition-rendering2-ogre2.so&quot;, at 0x7fb54296cf65, in ignition::rendering::v2::BaseVisual&lt;ignition::rendering::v2::Ogre2Node&gt;::PreRender()</span>\n<span class=\"c1\">#12   Object &quot;/usr/lib/x86_64-linux-gnu/libignition-rendering2-ogre2.so&quot;, at 0x7fb54296e931, in ignition::rendering::v2::BaseVisual&lt;ignition::rendering::v2::Ogre2Node&gt;::PreRenderChildren()</span>\n<span class=\"c1\">#11   Object &quot;/usr/lib/x86_64-linux-gnu/libignition-rendering2-ogre2.so&quot;, at 0x7fb54297d560, in ignition::rendering::v2::Ogre2GpuRays::CreateGpuRaysTextures()</span>\n<span class=\"c1\">#10   Object &quot;/usr/lib/x86_64-linux-gnu/libignition-rendering2-ogre2.so&quot;, at 0x7fb54297cc66, in ignition::rendering::v2::Ogre2GpuRays::CreateSampleTexture()</span>\n<span class=\"c1\">#9    Object &quot;/usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0&quot;, at 0x7fb54221aa64, in Ogre::TextureManager::createManual(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;, Ogre::TextureType, unsigned int, unsigned int, unsigned int, int, Ogre::PixelFormat, int, Ogre::ManualResourceLoader*, bool, unsigned int, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;, bool, bool)</span>\n<span class=\"c1\">#8    Object &quot;/usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0&quot;, at 0x7fb54221654c, in Ogre::Texture::createInternalResources()</span>\n<span class=\"c1\">#7    Object &quot;/usr/lib/x86_64-linux-gnu/OGRE-2.1/OGRE/RenderSystem_GL3Plus.so&quot;, at 0x7fb5281724b7, in Ogre::GL3PlusTexture::createInternalResourcesImpl()</span>\n<span class=\"c1\">#6    Object &quot;/usr/lib/x86_64-linux-gnu/OGRE-2.1/OGRE/RenderSystem_GL3Plus.so&quot;, at 0x7fb528171eed, in Ogre::GL3PlusTexture::_createSurfaceList()</span>\n<span class=\"c1\">#5    Object &quot;/usr/lib/x86_64-linux-gnu/libstdc++.so.6&quot;, at 0x7fb58b2a8d23, in __cxa_throw</span>\n<span class=\"c1\">#4    Object &quot;/usr/lib/x86_64-linux-gnu/libstdc++.so.6&quot;, at 0x7fb58b2a8af0, in std::terminate()</span>\n<span class=\"c1\">#3    Object &quot;/usr/lib/x86_64-linux-gnu/libstdc++.so.6&quot;, at 0x7fb58b2a8ab5, in std::rethrow_exception(std::__exception_ptr::exception_ptr)</span>\n<span class=\"c1\">#2    Object &quot;/usr/lib/x86_64-linux-gnu/libstdc++.so.6&quot;, at 0x7fb58b2a2956, in </span>\n<span class=\"c1\">#1    Source &quot;/build/glibc-OTsEL5/glibc-2.27/stdlib/abort.c&quot;, line 79, in __GI_abort [0x7fb58ec5a800]</span>\n<span class=\"c1\">#0    Source &quot;/build/glibc-OTsEL5/glibc-2.27/signal/../sysdeps/unix/sysv/linux/raise.c&quot;, line 51, in __GI_raise [0x7fb58ec58e97]</span>\n<span class=\"na\">Aborted (Signal sent by tkill() 4599 1000)</span>\n<span class=\"na\">Aborted (core dumped)</span>\n</pre></div>\n\n\n<p>Using the config X2_SENSOR_CONFIG_4 or X2_SENSOR_CONFIG_5 is running. And one can also see movement in rviz. </p>\n<p>Does anybody has an idea how the problem with X2_SENSOR_CONFIG_6 can be fixed?</p>\n<p>\u200c</p>", "type": "rendered"}, "assignee": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "state": "closed", "version": null, "edited_on": null, "created_on": "2019-12-26T23:30:40.931827+00:00", "milestone": null, "updated_on": "2020-01-02T19:05:44.681813+00:00", "type": "issue", "id": 302}