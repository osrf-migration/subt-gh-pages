{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/osrf/subt/pullrequests/239/comments/111293267.json"}, "html": {"href": "#!/osrf/subt/pull-requests/239/_/diff#comment-111293267"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 239, "links": {"self": {"href": "data/repositories/osrf/subt/pullrequests/239.json"}, "html": {"href": "#!/osrf/subt/pull-requests/239"}}, "title": "Fix score tests"}, "content": {"raw": "I had initially used the `add_rostest_gtest` macro to compile the tests, but they won't pass in CI since they need to be run manually. So I'm currently testing compiling them manually based on the definition of that macro in ros_comm\n\n* https://github.com/ros/ros_comm/blob/4b8683e79cb5b88ee613b18f5c4b4a0156757ba9/tools/rostest/cmake/rostest-extras.cmake.em#L78-L84\n\n~~~\ndiff -r c8950e8483a9 subt_ign/CMakeLists.txt\n--- a/subt_ign/CMakeLists.txt   Tue Jul 30 13:25:56 2019 -0700\n+++ b/subt_ign/CMakeLists.txt   Tue Jul 30 15:34:38 2019 -0700\n@@ -181,7 +181,17 @@\n \n find_package(rostest REQUIRED)\n \n-add_rostest_gtest(test_score test/score.test test/score.cc)\n+# test_score was ported from gazebo9, but doesn't work as rostest\n+# since it needs ign launch. so just compile it, but don't\n+# declare it as a rostest\n+#add_rostest_gtest(test_score test/score.test test/score.cc)\n+if(GTEST_FOUND)\n+  add_executable(test_score EXCLUDE_FROM_ALL test/score.cc)\n+  target_link_libraries(test_score ${GTEST_LIBRARIES})\n+  if(TARGET tests)\n+    add_dependencies(tests test_score)\n+  endif()\n+endif()\n target_include_directories(test_score\n   PRIVATE ${CATKIN_DEVEL_PREFIX}/include)\n target_link_libraries(test_score\n~~~", "markup": "markdown", "html": "<p>I had initially used the <code>add_rostest_gtest</code> macro to compile the tests, but they won't pass in CI since they need to be run manually. So I'm currently testing compiling them manually based on the definition of that macro in ros_comm</p>\n<ul>\n<li><a href=\"https://github.com/ros/ros_comm/blob/4b8683e79cb5b88ee613b18f5c4b4a0156757ba9/tools/rostest/cmake/rostest-extras.cmake.em#L78-L84\" rel=\"nofollow\" class=\"ap-connect-link\">https://github.com/ros/ros_comm/blob/4b8683e79cb5b88ee613b18f5c4b4a0156757ba9/tools/rostest/cmake/rostest-extras.cmake.em#L78-L84</a></li>\n</ul>\n<div class=\"codehilite\"><pre><span></span><span class=\"gh\">diff -r c8950e8483a9 subt_ign/CMakeLists.txt</span>\n<span class=\"gd\">--- a/subt_ign/CMakeLists.txt   Tue Jul 30 13:25:56 2019 -0700</span>\n<span class=\"gi\">+++ b/subt_ign/CMakeLists.txt   Tue Jul 30 15:34:38 2019 -0700</span>\n<span class=\"gu\">@@ -181,7 +181,17 @@</span>\n\n find_package(rostest REQUIRED)\n\n<span class=\"gd\">-add_rostest_gtest(test_score test/score.test test/score.cc)</span>\n<span class=\"gi\">+# test_score was ported from gazebo9, but doesn&#39;t work as rostest</span>\n<span class=\"gi\">+# since it needs ign launch. so just compile it, but don&#39;t</span>\n<span class=\"gi\">+# declare it as a rostest</span>\n<span class=\"gi\">+#add_rostest_gtest(test_score test/score.test test/score.cc)</span>\n<span class=\"gi\">+if(GTEST_FOUND)</span>\n<span class=\"gi\">+  add_executable(test_score EXCLUDE_FROM_ALL test/score.cc)</span>\n<span class=\"gi\">+  target_link_libraries(test_score ${GTEST_LIBRARIES})</span>\n<span class=\"gi\">+  if(TARGET tests)</span>\n<span class=\"gi\">+    add_dependencies(tests test_score)</span>\n<span class=\"gi\">+  endif()</span>\n<span class=\"gi\">+endif()</span>\n target_include_directories(test_score\n   PRIVATE ${CATKIN_DEVEL_PREFIX}/include)\n target_link_libraries(test_score\n</pre></div>", "type": "rendered"}, "created_on": "2019-07-30T22:45:21.700359+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2019-07-30T22:45:21.709209+00:00", "type": "pullrequest_comment", "id": 111293267}, {"links": {"self": {"href": "data/repositories/osrf/subt/pullrequests/239/comments/111294137.json"}, "html": {"href": "#!/osrf/subt/pull-requests/239/_/diff#comment-111294137"}}, "parent": {"id": 111293267, "links": {"self": {"href": "data/repositories/osrf/subt/pullrequests/239/comments/111293267.json"}, "html": {"href": "#!/osrf/subt/pull-requests/239/_/diff#comment-111293267"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 239, "links": {"self": {"href": "data/repositories/osrf/subt/pullrequests/239.json"}, "html": {"href": "#!/osrf/subt/pull-requests/239"}}, "title": "Fix score tests"}, "content": {"raw": "thanks, updated in [4968144](#!/osrf/subt/commits/49681443cad06a311ba9e1bfbb14f05241092705)", "markup": "markdown", "html": "<p>thanks, updated in <a data-is-external-link=\"true\" href=\"#!/osrf/subt/commits/49681443cad06a311ba9e1bfbb14f05241092705\" rel=\"nofollow\">4968144</a></p>", "type": "rendered"}, "created_on": "2019-07-30T22:58:57.515480+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": "2019-07-30T22:58:57.523595+00:00", "type": "pullrequest_comment", "id": 111294137}], "page": 1, "size": 2}